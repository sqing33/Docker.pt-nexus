import{d as Ge,r as g,N as O,o as je,a as h,i as l,e as s,n as _e,m as N,k as A,w as t,f as V,F as M,g as w,z as u,x as r,a7 as ye,j as d,W as he,a8 as ke,a9 as de,aa as re,a1 as R,Q as ee,ab as De,ac as Ke,t as S,u as we,v as Oe,l as se,$ as qe,D as Qe,M as We,ad as be,ae as xe,P as He,h as p,B as Je,q as Xe,p as Ze}from"./index-C1MnyYFV.js";const es={class:"settings-container"},ss={class:"settings-grid"},ts={class:"card-header"},ls={class:"header-content"},as={class:"card-content"},os={class:"password-hint"},ns={class:"settings-card glass-card glass-rounded glass-transparent-header glass-transparent-body"},ds={class:"card-header"},rs={class:"header-content"},is={class:"card-content"},us={class:"settings-card glass-card glass-rounded glass-transparent-header glass-transparent-body"},ps={class:"card-header"},gs={class:"header-content"},cs={class:"card-content"},fs={style:{display:"flex","align-items":"center",gap:"15px"}},ms={style:{flex:"1",display:"flex","flex-direction":"column","justify-content":"center"}},vs={style:{display:"flex",margin:"auto",gap:"20px","justify-content":"center",padding:"15px 0"}},_s={style:{height:"500px","overflow-y":"auto"}},ys={key:0,style:{"text-align":"center",padding:"20px",color:"#999"}},hs={key:1},ks={style:{color:"#999","margin-right":"10px"}},ws={style:{"margin-left":"10px"}},bs={style:{"text-align":"right"}},xs={class:"settings-card glass-card glass-rounded glass-transparent-header glass-transparent-body"},Vs={class:"card-header"},Cs={class:"header-content"},zs={class:"card-content"},Us={key:"agsv",class:"credential-section"},Ts={class:"credential-header"},Ss={class:"credential-form"},Is={key:"other",class:"placeholder-section"},Ps={class:"settings-card glass-card glass-rounded glass-transparent-header glass-transparent-body"},Ns={class:"card-header"},As={class:"header-content"},Ms={class:"card-content"},Fs={class:"settings-card glass-card glass-rounded glass-transparent-header glass-transparent-body"},Rs={class:"card-header"},Es={class:"header-content"},Bs={class:"card-content"},Ls={style:{display:"flex","align-items":"center",gap:"20px",padding:"15px 0"}},Ys={class:"form-item",style:{"margin-bottom":"16px"}},$s={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"6px"}},Gs={class:"settings-card glass-card glass-rounded glass-transparent-header glass-transparent-body"},js={class:"card-header"},Ds={class:"header-content"},Ks={class:"card-content"},Os={style:{display:"flex","align-items":"center",gap:"30px",padding:"15px 0"}},qs={style:{display:"flex","align-items":"center",gap:"12px"}},Qs={style:{display:"flex","align-items":"center",gap:"12px"}},Ws={style:{display:"flex","align-items":"center",gap:"10px",width:"100%"}},Hs={key:0,style:{display:"flex","flex-wrap":"wrap",gap:"8px"}},Js={style:{display:"flex","align-items":"center",gap:"10px",width:"100%"}},Xs={class:"settings-card glass-card glass-rounded glass-transparent-header glass-transparent-body"},Zs={class:"card-header"},et={class:"header-content"},st={class:"card-content placeholder-content"},tt={style:{"min-height":"300px"}},lt={key:0,style:{"text-align":"center",padding:"40px",color:"var(--el-text-color-secondary)"}},at={key:1},ot={style:{"margin-bottom":"16px",display:"flex","justify-content":"space-between","align-items":"center"}},nt={style:{color:"var(--el-text-color-regular)"}},dt={class:"path-tree-container"},rt={style:{"text-align":"right"}},it=Ge({__name:"GeneralSettings",setup(ut){const q=g(!1),Q=g(!1),ie=g("admin"),W=g(!1),m=g({old_password:"",username:"",password:""}),c=O({token:"",path_filter_enabled:!1,selected_paths:[]}),U=g([]),E=g(!1),B=g(!1),L=g([]),C=g(),Y=g([]),ue=g(!1),v=O({image_hoster:"pixhost",agsv_email:"",agsv_password:"",default_downloader:""}),Ve=[{value:"pixhost",label:"Pixhost (免费)"},{value:"agsv",label:"末日图床 (需账号)"}],pe=g([]),x=g(""),I=g(!1),P=g(""),Ce=()=>{I.value=!I.value,I.value?P.value=x.value:P.value=x.value?"*".repeat(x.value.length):""},ze=a=>{a.length>0&&a.split("").every(o=>o==="*")||(x.value=a,c.token=a)},H=g(!1),$=g([]),te=g(!1),le=g(!1),F=O({background_url:""}),ae=g(!1),T=O({anonymous_upload:!0,cspt_ptgen_token:""}),Ue=()=>{window.open("https://cspt.top/ptgen.php","_blank")};g(!1);const _=O({category:{enabled:!0,category:""},tags:{enabled:!0,tags:["PT Nexus","站点/{站点名称}"]}}),J=g(""),ge=()=>{const a=J.value;if(a&&a.trim()){const e=a.trim();_.tags.tags.includes(e)?u.warning("该标签已存在"):(_.tags.tags.push(e),G(),J.value="")}},Te=a=>{_.tags.tags.splice(a,1),G()},G=async()=>{try{const a={category:_.category,tags:_.tags};console.log("正在保存标签配置:",a);const e=await w.post("/api/config/tags",a);console.log("保存结果:",e.data)}catch(a){const e=a.response?.data?.message||"保存失败。";console.error("保存失败:",e),u.error(e)}},X=async()=>{ue.value=!0;try{const a={image_hoster:v.image_hoster,agsv_email:v.agsv_email,agsv_password:v.agsv_password,default_downloader:v.default_downloader};await w.post("/api/settings/cross_seed",a)}catch(a){const e=a.response?.data?.error||"保存失败。";u.error(e)}finally{ue.value=!1}},Se=async()=>{try{const a=await w.get("/api/auth/status");a.data?.success&&(ie.value=a.data.username||"admin",W.value=!!a.data.must_change_password,m.value.username=ie.value);const o=(await w.get("/api/settings")).data;if(o.iyuu_token){x.value=o.iyuu_token;const i="*".repeat(o.iyuu_token.length);c.token=i,P.value=i}else x.value="",c.token="",P.value="";o.iyuu_settings&&(c.path_filter_enabled=o.iyuu_settings.path_filter_enabled||!1,c.selected_paths=o.iyuu_settings.selected_paths||[]),Object.assign(v,o.cross_seed||{}),o.ui_settings&&o.ui_settings.background_url&&(F.background_url=o.ui_settings.background_url),o.upload_settings&&(T.anonymous_upload=o.upload_settings.anonymous_upload!==!1),o.cross_seed&&o.cross_seed.cspt_ptgen_token&&(T.cspt_ptgen_token=o.cross_seed.cspt_ptgen_token),o.tags_config&&(o.tags_config.category&&(_.category.enabled=o.tags_config.category.enabled,_.category.category=o.tags_config.category.category),o.tags_config.tags&&(_.tags.enabled=o.tags_config.tags.enabled,_.tags.tags=o.tags_config.tags.tags||[]));const k=await w.get("/api/downloaders_list");pe.value=k.data,c.path_filter_enabled&&await j()}catch{u.error("无法加载设置。")}},Ie=a=>{const e=[],o=new Map;return a.sort().forEach(k=>{const i=k.replace(/^\/|\/$/g,"").split("/");let y="",f=e;i.forEach((b,z)=>{if(y=z===0?`/${b}`:`${y}/${b}`,!o.has(y)){const K={path:z===i.length-1?k:y,label:b,children:[]};o.set(y,K),f.push(K)}f=o.get(y).children})}),o.forEach(k=>{k.children&&k.children.length===0&&delete k.children}),e},j=async()=>{E.value=!0;try{const a=await w.get("/api/paths");a.data.success?(U.value=a.data.paths||[],Y.value=Ie(U.value)):(u.error(a.data.error||"获取路径列表失败"),U.value=[],Y.value=[])}catch(a){const e=a.response?.data?.error||"获取路径列表失败";u.error(e),U.value=[],Y.value=[]}finally{E.value=!1}},ce=async()=>{if(!Q.value){Q.value=!0;try{const a={path_filter_enabled:c.path_filter_enabled,selected_paths:c.selected_paths};if(await w.post("/api/iyuu/settings",a),x.value&&c.token!=="********"){const e={iyuu_token:x.value};await w.post("/api/settings",e),I.value=!1;const o=x.value?"*".repeat(x.value.length):"";P.value=o,c.token=o}else if(!x.value&&c.token){const e={iyuu_token:c.token};await w.post("/api/settings",e),x.value=c.token}u.success("IYUU 设置已保存！")}catch(a){const e=a.response?.data?.error||"保存失败。";u.error(e)}finally{Q.value=!1}}},Pe=async()=>{try{u.success("IYUU 查询已触发，请稍后查看结果。"),w.post("/api/iyuu/trigger_query").catch(a=>{console.error("IYUU 查询后台执行失败:",a)})}catch(a){const e=a.response?.data?.message||"触发查询失败。";u.error(e)}},fe=async()=>{te.value=!0,H.value=!0;try{const a=await w.get("/api/iyuu/logs");a.data.success?$.value=a.data.logs||[]:(u.error(a.data.message||"获取日志失败"),$.value=[])}catch(a){const e=a.response?.data?.message||"获取日志失败";u.error(e),$.value=[]}finally{te.value=!1}},Ne=async()=>{if(!q.value){if(!m.value.old_password){u.warning("请填写当前密码");return}if(!m.value.username&&!m.value.password){u.warning("请输入新用户名或新密码");return}if(m.value.username&&m.value.username.trim().length<3){u.warning("用户名至少 3 个字符");return}if(m.value.password&&m.value.password.length<6){u.warning("密码至少 6 位");return}q.value=!0;try{const a={old_password:m.value.old_password};m.value.username&&(a.username=m.value.username),m.value.password&&(a.password=m.value.password);const e=await w.post("/api/auth/change_password",a);e.data?.success?(u.success("保存成功，请重新登录"),localStorage.removeItem("token"),window.location.href="/login"):u.error(e.data?.message||"保存失败")}catch(a){u.error(a?.response?.data?.message||"保存失败")}finally{q.value=!1}}},Ae=async()=>{le.value=!0;try{const a={ui_settings:{background_url:F.background_url}};await w.post("/api/settings",a),u.success("背景设置已保存！"),window.dispatchEvent(new CustomEvent("background-updated",{detail:{backgroundUrl:F.background_url}}))}catch(a){const e=a.response?.data?.error||"保存失败。";u.error(e)}finally{le.value=!1}},Me=async()=>{ae.value=!0;try{const a={anonymous_upload:T.anonymous_upload};await w.post("/api/upload_settings",a);const e={image_hoster:v.image_hoster,agsv_email:v.agsv_email,agsv_password:v.agsv_password,default_downloader:v.default_downloader,cspt_ptgen_token:T.cspt_ptgen_token};await w.post("/api/settings/cross_seed",e),u.success("上传设置已保存！")}catch(a){const e=a.response?.data?.error||"保存失败。";u.error(e)}finally{ae.value=!1}},Fe=async a=>{a&&U.value.length===0&&await j()},oe=()=>C.value?C.value.getCheckedNodes().filter(e=>!e.children||e.children.length===0).map(e=>e.path):[],Re=()=>{L.value=oe()},Ee=async()=>{U.value.length===0&&await j(),B.value=!0,await Xe(),C.value&&(C.value.setCheckedKeys([]),C.value.setCheckedKeys(c.selected_paths))},Be=()=>{if(C.value){const a=[],e=o=>{o.forEach(k=>{!k.children||k.children.length===0?a.push(k.path):e(k.children)})};e(Y.value),C.value.setCheckedKeys(a),L.value=a}},Le=()=>{C.value&&(C.value.setCheckedKeys([]),L.value=[])},Ye=()=>{c.selected_paths=oe(),B.value=!1,u.success(`已选择 ${c.selected_paths.length} 个路径`),ce()};return je(()=>{Se()}),(a,e)=>{const o=V("el-icon"),k=V("el-tag"),i=V("el-button"),y=V("el-input"),f=V("el-form-item"),b=V("el-text"),z=V("el-form"),D=V("el-switch"),K=V("el-dialog"),ne=V("el-option"),me=V("el-select"),$e=V("el-tree"),ve=Oe("loading");return p(),h(M,null,[l("div",es,[l("div",ss,[l("div",{class:_e(["settings-card glass-card glass-rounded glass-transparent-header glass-transparent-body",{"temp-password-highlight":W.value}])},[l("div",ts,[l("div",ls,[s(o,{class:"header-icon"},{default:t(()=>[s(r(ye))]),_:1}),e[21]||(e[21]=l("h3",null,"账户信息",-1)),W.value?(p(),N(k,{key:0,type:"danger",size:"small",effect:"dark"},{default:t(()=>[s(o,{style:{"vertical-align":"middle","margin-right":"4px"}},{default:t(()=>[s(r(he))]),_:1}),e[20]||(e[20]=d(" 临时密码-请立即修改 ",-1))]),_:1})):A("",!0)]),s(i,{type:"primary",loading:q.value,onClick:Ne,size:"small"},{default:t(()=>[...e[22]||(e[22]=[d(" 保存 ",-1)])]),_:1},8,["loading"])]),l("div",as,[s(z,{model:m.value,"label-position":"top",class:"settings-form"},{default:t(()=>[s(f,{label:"用户名",class:"form-item"},{default:t(()=>[s(y,{modelValue:m.value.username,"onUpdate:modelValue":e[0]||(e[0]=n=>m.value.username=n),placeholder:"请输入用户名",clearable:""},{prefix:t(()=>[s(o,null,{default:t(()=>[s(r(ye))]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(f,{label:"当前密码",required:"",class:"form-item"},{default:t(()=>[s(y,{modelValue:m.value.old_password,"onUpdate:modelValue":e[1]||(e[1]=n=>m.value.old_password=n),type:"password",placeholder:"请输入当前密码","show-password":""},{prefix:t(()=>[s(o,null,{default:t(()=>[s(r(ke))]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(f,{label:"新密码",class:"form-item"},{default:t(()=>[s(y,{modelValue:m.value.password,"onUpdate:modelValue":e[2]||(e[2]=n=>m.value.password=n),type:"password",placeholder:"至少 6 位","show-password":""},{prefix:t(()=>[s(o,null,{default:t(()=>[s(r(de))]),_:1})]),_:1},8,["modelValue"]),l("div",os,[s(b,{type:"info",size:"small"},{default:t(()=>[...e[23]||(e[23]=[d("留空表示不修改密码",-1)])]),_:1})])]),_:1}),e[25]||(e[25]=l("div",{class:"form-spacer"},null,-1)),W.value?(p(),N(b,{key:0,type:"warning",size:"small",class:"security-hint"},{default:t(()=>[s(o,{size:"12"},{default:t(()=>[s(r(he))]),_:1}),e[24]||(e[24]=d(" 为确保安全，请立即设置新用户名与密码 ",-1))]),_:1})):A("",!0)]),_:1},8,["model"])])],2),l("div",ns,[l("div",ds,[l("div",rs,[s(o,{class:"header-icon"},{default:t(()=>[s(r(re))]),_:1}),e[26]||(e[26]=l("h3",null,"背景设置",-1))]),s(i,{type:"primary",loading:le.value,onClick:Ae,size:"small"},{default:t(()=>[...e[27]||(e[27]=[d(" 保存 ",-1)])]),_:1},8,["loading"])]),l("div",is,[s(z,{model:F,"label-position":"top",class:"settings-form"},{default:t(()=>[s(f,{label:"背景图片URL",class:"form-item"},{default:t(()=>[s(y,{modelValue:F.background_url,"onUpdate:modelValue":e[3]||(e[3]=n=>F.background_url=n),placeholder:"请输入背景图片的URL地址",clearable:""},{prefix:t(()=>[s(o,null,{default:t(()=>[s(r(re))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e[29]||(e[29]=l("div",{class:"form-spacer"},null,-1)),s(b,{type:"info",size:"small",class:"proxy-hint"},{default:t(()=>[s(o,{size:"12"},{default:t(()=>[s(r(R))]),_:1}),e[28]||(e[28]=d(" 设置应用程序的背景图片，支持在线图片URL ",-1))]),_:1})]),_:1},8,["model"])])]),l("div",us,[l("div",ps,[l("div",gs,[s(o,{class:"header-icon"},{default:t(()=>[s(r(ee))]),_:1}),e[30]||(e[30]=l("h3",null,"IYUU设置",-1))]),s(i,{type:"primary",loading:Q.value,onClick:ce,size:"small"},{default:t(()=>[...e[31]||(e[31]=[d(" 保存 ",-1)])]),_:1},8,["loading"])]),l("div",cs,[s(z,{model:c,"label-position":"top",class:"settings-form"},{default:t(()=>[s(f,{label:"IYUU Token",class:"form-item"},{default:t(()=>[s(y,{modelValue:P.value,"onUpdate:modelValue":e[4]||(e[4]=n=>P.value=n),type:I.value?"text":"password",placeholder:"请输入IYUU Token",onInput:ze},{prefix:t(()=>[s(o,null,{default:t(()=>[s(r(de))]),_:1})]),suffix:t(()=>[s(o,{onClick:Ce,style:{cursor:"pointer"},class:_e({"is-active":I.value})},{default:t(()=>[I.value?(p(),N(r(Ke),{key:1})):(p(),N(r(De),{key:0}))]),_:1},8,["class"])]),_:1},8,["modelValue","type"])]),_:1}),s(f,{label:"查询路径限制",class:"form-item"},{default:t(()=>[l("div",fs,[s(D,{modelValue:c.path_filter_enabled,"onUpdate:modelValue":e[5]||(e[5]=n=>c.path_filter_enabled=n),"active-text":"启用路径过滤","inactive-text":"禁用路径过滤",onChange:Fe},null,8,["modelValue"]),c.path_filter_enabled?(p(),N(i,{key:0,type:"primary",size:"small",onClick:Ee},{default:t(()=>[d(" 选择路径 ("+S(c.selected_paths.length)+") ",1)]),_:1})):A("",!0)])]),_:1}),l("div",ms,[s(f,{label:"",class:"form-item"},{default:t(()=>[l("div",vs,[s(i,{type:"success",onClick:Pe,size:"default",style:{"font-size":"14px",padding:"12px 24px"}},{default:t(()=>[...e[32]||(e[32]=[d(" 手动触发查询 ",-1)])]),_:1}),s(i,{type:"primary",onClick:fe,size:"default",style:{"font-size":"14px",padding:"12px 24px"}},{default:t(()=>[...e[33]||(e[33]=[d(" 查看日志 ",-1)])]),_:1})])]),_:1}),s(b,{type:"info",size:"small",style:{display:"block","text-align":"center",margin:"10px 0"}},{default:t(()=>[s(o,{size:"12"},{default:t(()=>[s(r(R))]),_:1}),e[34]||(e[34]=d(" 种子查询页面的红色表示可辅种但未在做种 ",-1))]),_:1})]),e[36]||(e[36]=l("div",{class:"form-spacer"},null,-1)),s(b,{type:"info",size:"small",class:"proxy-hint"},{default:t(()=>[s(o,{size:"12"},{default:t(()=>[s(r(R))]),_:1}),e[35]||(e[35]=d(" 用于与IYUU平台进行数据同步和通信的身份验证令牌 ",-1))]),_:1})]),_:1},8,["model"])])]),s(K,{modelValue:H.value,"onUpdate:modelValue":e[7]||(e[7]=n=>H.value=n),title:"IYUU 查询日志",width:"800px",top:"50px"},{footer:t(()=>[l("div",bs,[s(i,{onClick:e[6]||(e[6]=n=>H.value=!1)},{default:t(()=>[...e[37]||(e[37]=[d("关闭",-1)])]),_:1}),s(i,{type:"primary",onClick:fe},{default:t(()=>[...e[38]||(e[38]=[d("刷新",-1)])]),_:1})])]),default:t(()=>[we((p(),h("div",_s,[$.value.length===0?(p(),h("div",ys," 暂无日志记录 ")):(p(),h("div",hs,[(p(!0),h(M,null,se($.value,(n,Z)=>(p(),h("div",{key:Z,style:{padding:"8px 0","border-bottom":"1px solid #eee","font-size":"12px"}},[l("span",ks,"["+S(n.timestamp)+"]",1),l("span",{style:Je({color:n.level==="ERROR"?"#F56C6C":n.level==="WARNING"?"#E6A23C":n.level==="INFO"?"#409EFF":"#67C23A"})},"["+S(n.level)+"]",5),l("span",ws,S(n.message),1)]))),128))]))])),[[ve,te.value]])]),_:1},8,["modelValue"]),l("div",xs,[l("div",Vs,[l("div",Cs,[s(o,{class:"header-icon"},{default:t(()=>[s(r(re))]),_:1}),e[39]||(e[39]=l("h3",null,"图床设置",-1))])]),l("div",zs,[s(z,{model:v,"label-position":"top",class:"settings-form"},{default:t(()=>[s(f,{label:"截图图床",class:"form-item"},{default:t(()=>[s(me,{modelValue:v.image_hoster,"onUpdate:modelValue":e[8]||(e[8]=n=>v.image_hoster=n),placeholder:"请选择图床服务",onChange:X},{default:t(()=>[(p(),h(M,null,se(Ve,n=>s(ne,{key:n.value,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),s(qe,{name:"slide",mode:"out-in"},{default:t(()=>[v.image_hoster==="agsv"?(p(),h("div",Us,[l("div",Ts,[s(o,{class:"credential-icon"},{default:t(()=>[s(r(ke))]),_:1}),e[40]||(e[40]=l("span",{class:"credential-title"},"末日图床账号凭据",-1))]),l("div",Ss,[s(f,{label:"邮箱",class:"form-item compact"},{default:t(()=>[s(y,{modelValue:v.agsv_email,"onUpdate:modelValue":e[9]||(e[9]=n=>v.agsv_email=n),placeholder:"请输入邮箱",size:"small",onBlur:X},null,8,["modelValue"])]),_:1}),s(f,{label:"密码",class:"form-item compact"},{default:t(()=>[s(y,{modelValue:v.agsv_password,"onUpdate:modelValue":e[10]||(e[10]=n=>v.agsv_password=n),type:"password",placeholder:"请输入密码","show-password":"",size:"small",onBlur:X},null,8,["modelValue"])]),_:1})])])):(p(),h("div",Is,[s(b,{type:"info",size:"small"},{default:t(()=>[...e[41]||(e[41]=[d("当前图床无需额外配置，但是需要代理才能上传",-1)])]),_:1})]))]),_:1})]),_:1},8,["model"])])]),l("div",Ps,[l("div",Ns,[l("div",As,[s(o,{class:"header-icon"},{default:t(()=>[s(r(Qe))]),_:1}),e[42]||(e[42]=l("h3",null,"默认下载器设置",-1))])]),l("div",Ms,[s(z,{model:v,"label-position":"top",class:"settings-form"},{default:t(()=>[s(f,{label:"默认下载器",class:"form-item"},{default:t(()=>[s(me,{modelValue:v.default_downloader,"onUpdate:modelValue":e[11]||(e[11]=n=>v.default_downloader=n),placeholder:"请选择默认下载器",clearable:"",onChange:X},{default:t(()=>[s(ne,{label:"使用源种子所在的下载器",value:""}),(p(!0),h(M,null,se(pe.value,n=>(p(),N(ne,{key:n.id,label:n.name,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e[44]||(e[44]=l("div",{class:"form-spacer"},null,-1)),s(b,{type:"info",size:"small",class:"proxy-hint"},{default:t(()=>[s(o,{size:"12"},{default:t(()=>[s(r(R))]),_:1}),e[43]||(e[43]=d(' 转种完成后自动将种子添加到指定的下载器。选择"使用源种子所在的下载器"或不选择任何下载器，则添加到源种子所在的下载器。 ',-1))]),_:1})]),_:1},8,["model"])])]),l("div",Fs,[l("div",Rs,[l("div",Es,[s(o,{class:"header-icon"},{default:t(()=>[s(r(ee))]),_:1}),e[45]||(e[45]=l("h3",null,"转种设置",-1))]),s(i,{type:"primary",onClick:Me,loading:ae.value,size:"small"},{default:t(()=>[...e[46]||(e[46]=[d(" 保存 ",-1)])]),_:1},8,["loading"])]),l("div",Bs,[s(z,{model:T,"label-position":"top",class:"settings-form"},{default:t(()=>[s(f,{label:"",class:"form-item"},{default:t(()=>[l("div",Ls,[s(D,{modelValue:T.anonymous_upload,"onUpdate:modelValue":e[12]||(e[12]=n=>T.anonymous_upload=n),"active-text":"启用匿名","inactive-text":"禁用匿名",size:"large"},null,8,["modelValue"])])]),_:1}),l("div",Ys,[l("div",$s,[e[48]||(e[48]=l("span",{style:{"font-weight":"500",color:"var(--el-text-color-regular)","font-size":"13px"}}," 财神 PTGen API Token（每日100次） ",-1)),s(i,{type:"primary",link:"",onClick:Ue,style:{"white-space":"nowrap"}},{default:t(()=>[s(o,{style:{"margin-right":"4px"}},{default:t(()=>[s(r(We))]),_:1}),e[47]||(e[47]=d(" 获取Token ",-1))]),_:1})]),s(y,{modelValue:T.cspt_ptgen_token,"onUpdate:modelValue":e[13]||(e[13]=n=>T.cspt_ptgen_token=n),type:"password",placeholder:"请输入财神 PTGen API Token","show-password":""},{prefix:t(()=>[s(o,null,{default:t(()=>[s(r(de))]),_:1})]),_:1},8,["modelValue"])]),e[56]||(e[56]=l("div",{class:"form-spacer"},null,-1)),s(b,{type:"info",size:"small",class:"proxy-hint"},{default:t(()=>[s(o,{size:"12"},{default:t(()=>[s(r(R))]),_:1}),e[49]||(e[49]=d(" 启用后，发布种子时将使用匿名模式，不显示上传者信息",-1)),e[50]||(e[50]=l("br",null,null,-1)),e[51]||(e[51]=d(" 配置财神 PTGen API Token 后，优先使用该API获取影片信息",-1)),e[52]||(e[52]=l("br",null,null,-1)),e[53]||(e[53]=d(" 财神 PTGen API 每日限量 100+ 次，上限随等级提升",-1)),e[54]||(e[54]=l("br",null,null,-1)),e[55]||(e[55]=d(" 使用完会自动切换内置的其他 PTGen API ",-1))]),_:1})]),_:1},8,["model"])])]),l("div",Gs,[l("div",js,[l("div",Ds,[s(o,{class:"header-icon"},{default:t(()=>[s(r(be))]),_:1}),e[57]||(e[57]=l("h3",null,"下载器标签/分类设置",-1))])]),l("div",Ks,[s(z,{model:_,"label-position":"top",class:"settings-form"},{default:t(()=>[s(f,{label:"",class:"form-item"},{default:t(()=>[l("div",Os,[l("div",qs,[s(o,{size:"20"},{default:t(()=>[s(r(be))]),_:1}),e[58]||(e[58]=l("span",{style:{"font-weight":"500","font-size":"14px"}},"标签",-1)),s(D,{modelValue:_.tags.enabled,"onUpdate:modelValue":e[14]||(e[14]=n=>_.tags.enabled=n),size:"large",onChange:G},null,8,["modelValue"])]),l("div",Qs,[s(o,{size:"20"},{default:t(()=>[s(r(xe))]),_:1}),e[59]||(e[59]=l("span",{style:{"font-weight":"500","font-size":"14px"}},"分类",-1)),s(D,{modelValue:_.category.enabled,"onUpdate:modelValue":e[15]||(e[15]=n=>_.category.enabled=n),size:"large",onChange:G},null,8,["modelValue"])])])]),_:1}),_.tags.enabled?(p(),h(M,{key:0},[s(f,{label:"自定义标签",class:"form-item",style:{margin:"0"}}),s(f,{label:"",class:"form-item"},{default:t(()=>[l("div",Ws,[s(y,{modelValue:J.value,"onUpdate:modelValue":e[16]||(e[16]=n=>J.value=n),placeholder:"输入新标签",style:{flex:"1"},onKeyup:He(ge,["enter"])},null,8,["modelValue"]),s(i,{type:"primary",size:"small",onClick:ge},{default:t(()=>[...e[60]||(e[60]=[d(" 添加标签 ",-1)])]),_:1})])]),_:1}),s(f,{label:"",class:"form-item"},{default:t(()=>[_.tags.tags.length>0?(p(),h("div",Hs,[(p(!0),h(M,null,se(_.tags.tags,(n,Z)=>(p(),N(k,{key:Z,closable:"",onClose:pt=>Te(Z),size:"small"},{default:t(()=>[d(S(n),1)]),_:2},1032,["onClose"]))),128))])):A("",!0)]),_:1})],64)):A("",!0),_.category.enabled?(p(),h(M,{key:1},[s(f,{label:"自定义分类",class:"form-item",style:{margin:"0"}}),s(f,{class:"form-item"},{default:t(()=>[l("div",Js,[s(y,{modelValue:_.category.category,"onUpdate:modelValue":e[17]||(e[17]=n=>_.category.category=n),placeholder:"输入分类名称",size:"small",clearable:"",style:{flex:"1"}},null,8,["modelValue"]),s(i,{type:"primary",size:"small",onClick:G},{default:t(()=>[...e[61]||(e[61]=[d(" 保存 ",-1)])]),_:1})])]),_:1})],64)):A("",!0),e[69]||(e[69]=l("div",{class:"form-spacer"},null,-1)),s(b,{type:"info",size:"small",class:"proxy-hint"},{default:t(()=>[s(o,{size:"12"},{default:t(()=>[s(r(R))]),_:1}),e[62]||(e[62]=d(" 启用标签功能后，转种完成时会自动为种子添加标签",-1)),e[63]||(e[63]=l("br",null,null,-1)),e[64]||(e[64]=d(' 默认添加"站点/{站点名称}"和"PT Nexus"标签',-1)),e[65]||(e[65]=l("br",null,null,-1)),e[66]||(e[66]=d(" 自定义标签：可以为转种的种子添加自定义标签",-1)),e[67]||(e[67]=l("br",null,null,-1)),e[68]||(e[68]=d(" 分类：qBittorrent 支持一个分类，Transmission 将分类添加到标签中 ",-1))]),_:1})]),_:1},8,["model"])])]),l("div",Xs,[l("div",Zs,[l("div",et,[s(o,{class:"header-icon"},{default:t(()=>[s(r(ee))]),_:1}),e[70]||(e[70]=l("h3",null,"功能扩展",-1))])]),l("div",st,[s(o,{class:"placeholder-icon"},{default:t(()=>[s(r(ee))]),_:1}),e[71]||(e[71]=l("p",{class:"placeholder-text"},"功能扩展中",-1))])])])]),l("div",null,[l("div",null,[s(K,{modelValue:B.value,"onUpdate:modelValue":e[19]||(e[19]=n=>B.value=n),title:"选择IYUU查询路径",width:"600px",top:"50px"},{footer:t(()=>[l("div",rt,[s(i,{onClick:e[18]||(e[18]=n=>B.value=!1)},{default:t(()=>[...e[77]||(e[77]=[d("取消",-1)])]),_:1}),s(i,{type:"primary",onClick:Ye,disabled:L.value.length===0},{default:t(()=>[d(" 确定选择 ("+S(L.value.length)+") ",1)]),_:1},8,["disabled"])])]),default:t(()=>[we((p(),h("div",tt,[!E.value&&U.value.length===0?(p(),h("div",lt,[s(o,{style:{"font-size":"48px","margin-bottom":"16px",opacity:"0.5"}},{default:t(()=>[s(r(xe))]),_:1}),e[73]||(e[73]=l("p",null,"暂无可用的保存路径",-1)),s(i,{type:"primary",onClick:j,style:{"margin-top":"16px"}},{default:t(()=>[...e[72]||(e[72]=[d(" 刷新路径列表 ",-1)])]),_:1})])):U.value.length>0?(p(),h("div",at,[l("div",ot,[l("span",nt," 已选择 "+S(oe().length)+" / "+S(U.value.length)+" 个路径 ",1),l("div",null,[s(i,{size:"small",onClick:Be},{default:t(()=>[...e[74]||(e[74]=[d("全选",-1)])]),_:1}),s(i,{size:"small",onClick:Le},{default:t(()=>[...e[75]||(e[75]=[d("清空",-1)])]),_:1}),s(i,{size:"small",onClick:j,loading:E.value},{default:t(()=>[...e[76]||(e[76]=[d("刷新",-1)])]),_:1},8,["loading"])])]),l("div",dt,[s($e,{ref_key:"pathTreeRef",ref:C,data:Y.value,"show-checkbox":"","node-key":"path","default-expand-all":"","expand-on-click-node":!1,"check-on-click-node":"","check-strictly":!0,props:{class:"path-tree-node"},onCheck:Re},null,8,["data"])])])):A("",!0)])),[[ve,E.value]])]),_:1},8,["modelValue"])])])],64)}}}),ct=Ze(it,[["__scopeId","data-v-12fb7500"]]);export{ct as default};
