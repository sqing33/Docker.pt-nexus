import{d as H,r as y,c as g,o as L,a as l,b as T,e as d,w as c,f as _,g as k,E as w,h as o,_ as q,i as a,j as r,k as m,F as b,l as x,n as S,t as i,m as I,p as z}from"./index-BP1Lkwwp.js";const P={class:"home-container"},A={class:"site-grid"},F={class:"site-content"},M={class:"site-name-container"},j={class:"site-name"},Q={class:"site-roles"},R={key:0,class:"role-tag role-both"},G={key:1,class:"role-tag role-source"},J={key:2,class:"role-tag role-target"},K={key:0,class:"empty-placeholder"},O={class:"downloader-grid"},U={class:"downloader-header"},W={class:"downloader-name"},X={key:0,class:"downloader-details"},Y={class:"detail-row"},Z={class:"detail-value"},$={class:"detail-row"},ss={class:"detail-value"},es={class:"detail-row"},as={class:"detail-value"},ts={class:"detail-row"},os={class:"detail-value"},ls={class:"detail-row"},ns={class:"detail-value"},is={key:1,class:"downloader-disabled"},rs={key:0,class:"empty-downloader-placeholder"},cs=H({__name:"HomeView",setup(ds){const u=y([]),p=y([]),N=g(()=>u.value.filter(e=>e.is_source)),B=g(()=>u.value.filter(e=>e.is_target)),v=g(()=>{const e=new Map;return N.value.forEach(s=>{e.set(s.name,{...s,is_source:!0,is_target:!1})}),B.value.forEach(s=>{if(e.has(s.name)){const n=e.get(s.name);e.set(s.name,{...n,...s,is_source:!0,is_target:!0,has_cookie:n.has_cookie||s.has_cookie})}else e.set(s.name,{...s,is_source:!1,is_target:!0})}),Array.from(e.values()).sort((s,n)=>s.is_source&&s.is_target?-1:n.is_source&&n.is_target?1:s.is_source&&!n.is_source?-1:!s.is_source&&n.is_source?1:0)}),C=e=>{let s=!1;return(e.is_source&&!e.is_target||!e.is_source&&e.is_target||e.is_source&&e.is_target)&&(s=e.has_cookie&&(e.name!=="杜比"&&e.name!=="HDtime"||e.has_passkey)),{"site-configured":s,"site-unconfigured":!s}},V=async()=>{try{const e=await k.get("/api/sites/status");u.value=e.data}catch{w.error({title:"错误",message:"无法从服务器获取站点状态列表"})}},f=async()=>{try{const e=await k.get("/api/downloader_info");p.value=e.data}catch(e){console.error("获取下载器信息失败:",e),w.error({title:"错误",message:"无法从服务器获取下载器信息"})}};return L(()=>{V(),f(),setInterval(()=>{f()},3e4)}),(e,s)=>{const n=_("el-card"),h=_("el-tag"),D=_("el-col"),E=_("el-row");return o(),l("div",P,[s[7]||(s[7]=T('<div class="warning-banner" data-v-49454840><div class="warning-content" data-v-49454840><img src="'+q+'" alt="PT Nexus Logo" class="warning-icon" data-v-49454840><div class="text-container" data-v-49454840><div class="marquee-container" data-v-49454840><div class="marquee-content" data-v-49454840><span class="warning-text" data-v-49454840>重要提示：PT Nexus 仅作为转种辅助工具，无法保证 100% 准确性。转种前请务必仔细检查预览信息，确认参数正确无误。转种后请及时核实种子信息，如有错误请立即修改并反馈 bug。因使用本工具产生的种子错误问题，需由使用者自行修改，如不修改则本工具不承担任何责任。</span><span class="warning-text" data-v-49454840>重要提示：PT Nexus 仅作为转种辅助工具，无法保证 100% 准确性。转种前请务必仔细检查预览信息，确认参数正确无误。转种后请及时核实种子信息，如有错误请立即修改并反馈 bug。因使用本工具产生的种子错误问题，需由使用者自行修改，如不修改则本工具不承担任何责任。</span></div></div></div></div></div>',1)),d(n,{class:"site-card"},{header:c(()=>[...s[0]||(s[0]=[a("div",{class:"site-card-header"},[a("span",{class:"site-card-title"},"站点支持列表"),a("div",{class:"site-legend"},[a("span",{class:"legend-item"},[a("span",{class:"legend-dot legend-dot-success"}),r(" 配置完整 ")]),a("span",{class:"legend-item"},[a("span",{class:"legend-dot legend-dot-primary"}),r(" 配置不完整 ")])])],-1)])]),default:c(()=>[s[1]||(s[1]=a("div",{class:"combined-legend"},[a("span",{class:"role-legend-item"},[a("span",{class:"role-tag role-source"},"源"),r(" 源站点 ")]),a("span",{class:"role-legend-item"},[a("span",{class:"role-tag role-target"},"目标"),r(" 目标站点 ")]),a("span",{class:"role-legend-item"},[a("span",{class:"role-tag role-both"},"源/目标"),r(" 同时支持源和目标 ")])],-1)),a("div",A,[(o(!0),l(b,null,x(v.value,t=>(o(),l("div",{key:t.name,class:S(["site-item",C(t)])},[a("div",F,[a("div",M,[a("span",j,i(t.name),1)])]),a("div",Q,[t.is_source&&t.is_target?(o(),l("span",R,"源/目标")):t.is_source?(o(),l("span",G,"源")):t.is_target?(o(),l("span",J,"目标")):m("",!0)])],2))),128)),v.value.length?m("",!0):(o(),l("div",K,"加载中..."))])]),_:1}),d(E,{gutter:24,style:{"margin-top":"24px"}},{default:c(()=>[d(D,{span:24},{default:c(()=>[a("div",O,[(o(!0),l(b,null,x(p.value,t=>(o(),I(n,{key:t.name,class:S(["downloader-card glass-card glass-rounded",{disabled:!t.enabled}])},{default:c(()=>[a("div",U,[a("div",W,[d(h,{type:t.enabled?"success":"info",effect:"dark",size:"small"},{default:c(()=>[r(i(t.type==="qbittorrent"?"QB":"TR"),1)]),_:2},1032,["type"]),r(" "+i(t.name),1)]),d(h,{type:t.status==="已连接"?"success":"danger",size:"small"},{default:c(()=>[r(i(t.status),1)]),_:2},1032,["type"])]),t.enabled?(o(),l("div",X,[a("div",Y,[s[2]||(s[2]=a("span",{class:"detail-label"},"版本:",-1)),a("span",Z,i(t.details?.版本||"N/A"),1)]),a("div",$,[s[3]||(s[3]=a("span",{class:"detail-label"},"今日上传:",-1)),a("span",ss,i(t.details?.今日上传量||"0 B"),1)]),a("div",es,[s[4]||(s[4]=a("span",{class:"detail-label"},"今日下载:",-1)),a("span",as,i(t.details?.今日下载量||"0 B"),1)]),a("div",ts,[s[5]||(s[5]=a("span",{class:"detail-label"},"累计上传:",-1)),a("span",os,i(t.details?.累计上传量||"0 B"),1)]),a("div",ls,[s[6]||(s[6]=a("span",{class:"detail-label"},"累计下载:",-1)),a("span",ns,i(t.details?.累计下载量||"0 B"),1)])])):(o(),l("div",is,"下载器已禁用"))]),_:2},1032,["class"]))),128)),p.value.length?m("",!0):(o(),l("div",rs," 暂无下载器配置 "))])]),_:1})]),_:1})])}}}),us=z(cs,[["__scopeId","data-v-49454840"]]);export{us as default};
