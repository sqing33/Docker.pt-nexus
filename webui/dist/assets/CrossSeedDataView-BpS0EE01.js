import{d as Lt,r as g,c as j,o as St,s as Et,O as xt,a as _,m as R,k as x,i as r,f as b,e as a,w as s,j as o,t as c,x as Ut,Q as gs,u as lt,v as Jt,F as Ie,l as Ee,L as Ct,g as $,z as w,q as qt,h as u,p as Xt,R as Ot,n as fe,B as _s,S as vs}from"./index-jwnv7X2u.js";import{u as ms,C as hs}from"./CrossSeedPanel-KaHbqUhC.js";const ys={class:"batch-fetch-panel"},ws={class:"search-and-controls"},bs={key:0,class:"current-filters",style:{"margin-right":"15px",display:"flex","align-items":"center"}},ks={key:2,class:"pagination-controls"},Ss={class:"table-container"},xs=["title"],Cs={key:0,style:{color:"#909399"}},Ds={class:"filter-card-header"},$s={class:"filter-card-body"},zs={class:"path-tree-container"},Ts={class:"filter-card-footer"},Is={key:2,class:"modal-overlay"},Bs={class:"modal-header"},Rs={class:"batch-fetch-content"},Vs={class:"config-section"},Fs={class:"batch-fetch-footer"},Ps={key:3,class:"modal-overlay"},Ms={class:"modal-header"},Ns={class:"priority-settings-content"},As={class:"priority-section"},Os={class:"priority-list"},Ls={key:0,style:{color:"#909399","margin-left":"10px"}},Es={class:"priority-settings-footer"},Us={key:4,class:"modal-overlay"},Js={class:"modal-header"},qs={class:"progress-header-controls"},Xs={class:"progress-content"},js={class:"progress-summary"},Hs={key:0,class:"bdinfo-stats"},Ws={class:"results-table-container"},Ks={class:"progress-footer"},Gs=3e3,Qs=Lt({__name:"BatchFetchPanel",emits:["cancel","fetch-completed"],setup(jt,{emit:nt}){const ot=nt,re=g([]),Se=g(!0),te=g(null),H=g([]),P=g(!1),ge=g(!1),xe=g(!1),U=g(!1),se=g(!1),M=g([]),ie=g(null),Q=g(null),ae=g([]),le=g([]),Ue=g([]),Ce=g([]),W=g(1),C=g(20),Be=g(0),J=g(""),_e=g(!1),B=g({paths:[],states:[],downloaderIds:[],sourceSiteAvailability:[]}),L=g({...B.value}),Y=g(null),k=g({total:0,processed:0,success:0,failed:0,skipped:0,isRunning:!1,results:[]}),Re=g(null),We=j(()=>{const i=B.value,n=[];return i.sourceSiteAvailability&&i.sourceSiteAvailability.length>0&&n.push(`源站点: ${i.sourceSiteAvailability.length}`),i.paths&&i.paths.length>0&&n.push(`路径: ${i.paths.length}`),i.states&&i.states.length>0&&n.push(`状态: ${i.states.length}`),i.downloaderIds&&i.downloaderIds.length>0&&n.push(`下载器: ${i.downloaderIds.length}`),n.join(", ")}),Z=j(()=>{const i=B.value;return i.sourceSiteAvailability&&i.sourceSiteAvailability.length>0||i.paths&&i.paths.length>0||i.states&&i.states.length>0||i.downloaderIds&&i.downloaderIds.length>0}),de=g([]),Ke=async()=>{try{const i=await $.get("/api/sites/status");de.value=i.data}catch(i){console.error("加载站点状态失败:",i)}},ve=j(()=>k.value.total===0?0:Math.round(k.value.processed/k.value.total*100)),De=j(()=>{if(!k.value.isRunning)return k.value.failed>0?"exception":"success"}),rt=i=>{const n=[],h=new Map;return i.sort().forEach(m=>{const v=m.replace(/^\/|\/$/g,"").split("/");let D="",X=n;v.forEach((K,V)=>{if(D=V===0?`/${K}`:`${D}/${K}`,!h.has(D)){const O={path:V===v.length-1?m:D,label:K,children:[]};h.set(D,O),X.push(O)}X=h.get(D).children})}),h.forEach(m=>{m.children&&m.children.length===0&&delete m.children}),n},me=async()=>{Se.value=!0,te.value=null;try{const i=new URLSearchParams({page:W.value.toString(),pageSize:C.value.toString(),nameSearch:J.value,path_filters:JSON.stringify(B.value.paths),state_filters:JSON.stringify(B.value.states),downloader_filters:JSON.stringify(B.value.downloaderIds),source_availability_filters:JSON.stringify(B.value.sourceSiteAvailability),exclude_existing:"true"}),h=(await $.get(`/api/data?${i.toString()}`)).data;h.error?(te.value=h.error||"获取数据失败",w.error(h.error||"获取数据失败")):(re.value=h.data.map(m=>({name:m.name,save_path:m.save_path,size:m.size,progress:m.progress,state:m.state,sites:m.sites||{},downloader_ids:m.downloader_ids||[]})),Be.value=h.total,(Ue.value.length===0||!B.value.states.length)&&(Ue.value=[...new Set(re.value.map(m=>m.state))]))}catch(i){te.value=i.message||"网络错误",w.error(i.message||"网络错误")}finally{Se.value=!1}},it=async()=>{try{const n=(await $.get("/api/all_downloaders")).data;Ce.value=n.filter(h=>h.enabled)}catch(i){te.value=i.message}},dt=async()=>{try{const i=new URLSearchParams({page:"1",page_size:"1",path_filters:JSON.stringify([]),state_filters:JSON.stringify([]),downloader_filters:JSON.stringify([]),source_availability_filters:JSON.stringify([])}),h=(await $.get(`/api/data?${i.toString()}`)).data;h.unique_paths&&(le.value=h.unique_paths,ae.value=rt(le.value))}catch(i){console.error("获取路径列表失败:",i)}},ut=i=>{C.value=i,W.value=1,me()},he=i=>{W.value=i,me()},T=()=>{B.value={paths:[],states:[],downloaderIds:[],sourceSiteAvailability:[]},J.value="",W.value=1,ye(),me()},ne=()=>{L.value={...B.value},_e.value=!0,qt(()=>{Q.value&&B.value.paths.length>0&&Q.value.setCheckedKeys(B.value.paths,!1)})},Ge=()=>{if(Q.value){const i=Q.value.getCheckedKeys(!1);L.value.paths=i}B.value={...L.value},_e.value=!1,W.value=1,ye(),me()},ye=async()=>{try{await $.post("/api/config/batch_fetch_filters",{batch_fetch_filters:B.value,batch_fetch_name_search:J.value})}catch(i){console.error("保存筛选条件失败:",i)}},ct=async()=>{try{const n=(await $.get("/api/config/batch_fetch_filters")).data;if(n.success&&n.data){const h={paths:[],states:[],downloaderIds:[],sourceSiteAvailability:[]};B.value={...h,...n.data}}n.success&&n.name_search!==void 0&&(J.value=n.name_search)}catch(i){console.error("加载筛选条件失败:",i)}},ue=i=>{H.value=i},E=i=>{const n={},h=new Set(["我堡","OurBits"]);for(const[m,v]of Object.entries(i||{}))h.has(m)||(v.migration===1||v.migration===3)&&de.value.find(D=>D.name===m)?.has_cookie&&(n[m]=v);return n},q=()=>{if(H.value.length===0){w.warning("请先选择要获取数据的种子");return}P.value=!0},Je=()=>{P.value=!1},pt=async()=>{xe.value=!0,await Ve()},qe=()=>{xe.value=!1},Ve=async()=>{U.value=!0;try{const n=(await $.get("/api/sites/status")).data,h=new Set(["我堡","OurBits"]),m=n.filter(A=>A.is_source&&A.has_cookie&&!h.has(A.name)),D=(await $.get("/api/config/source_priority")).data,X=D.success?D.data||[]:[],K=[],V=new Set;X.forEach(A=>{if(h.has(A))return;const O=m.find($e=>$e.name===A);O&&!V.has(O.name)&&(K.push(O),V.add(O.name))}),m.forEach(A=>{V.has(A.name)||K.push(A)}),M.value=K}catch(i){w.error(i.message||"加载配置失败")}finally{U.value=!1}},Qe=async()=>{se.value=!0;try{const i=new Set(["我堡","OurBits"]),n=M.value.map(m=>m.name).filter(m=>!i.has(m)),h=await $.post("/api/config/source_priority",{source_priority:n});if(h.data.success)w.success("源站点优先级配置已保存"),qe();else throw new Error(h.data.message||"保存失败")}catch(i){w.error(i.message||"保存配置失败")}finally{se.value=!1}},ft=i=>i===0?"success":i===1?"primary":i===2?"warning":"info",N=i=>{ie.value=i},Fe=i=>{if(ie.value===null)return;const n=M.value[ie.value];M.value.splice(ie.value,1),M.value.splice(i,0,n),ie.value=null},gt=async()=>{try{const i=H.value.map(m=>m.name),h=(await $.post("/api/migrate/batch_fetch_seed_data",{torrentNames:i})).data;h.success?(Y.value=h.task_id,w.success("批量获取任务已启动"),Je(),Ye()):w.error(h.message||"批量获取任务启动失败")}catch(i){const n=i.response?.data?.message||i.message||"网络错误";w.error(n)}},Ye=()=>{ge.value=!0,_t()},Ze=()=>{ge.value=!1,we()},_t=()=>{we(),Xe(),Re.value=setInterval(async()=>{ge.value&&Y.value?(await Xe(),k.value&&!k.value.isRunning&&setTimeout(()=>{k.value.isRunning||we()},3e3)):we()},Gs)},we=()=>{Re.value&&(clearInterval(Re.value),Re.value=null)},Xe=async()=>{if(Y.value)try{const n=(await $.get(`/api/migrate/batch_fetch_progress?task_id=${Y.value}`)).data;if(n.success){const h=k.value.isRunning;if(k.value=n.progress,k.value.results&&k.value.results.length>0){const m={processing:k.value.results.filter(v=>v.bdinfo_status==="processing_bdinfo"||v.mediainfo&&v.mediainfo.includes("正在处理 BDInfo")).length,completed:k.value.results.filter(v=>v.bdinfo_status==="completed"||v.mediainfo&&v.mediainfo.includes("DISC INFO")).length,failed:k.value.results.filter(v=>v.bdinfo_status==="failed"||v.mediainfo&&v.mediainfo.includes("bdinfo提取失败")).length};k.value.bdinfo_stats=m}h&&!k.value.isRunning&&ot("fetch-completed")}else w.error(n.message||"获取进度失败")}catch(i){console.error("获取进度时出错:",i)}},oe=i=>{switch(i){case"success":return"success";case"failed":return"danger";case"skipped":return"info";default:return"info"}},vt=i=>{switch(i){case"success":return"成功";case"failed":return"失败";case"skipped":return"跳过";default:return"未知"}},mt=i=>{if(!i||i===0)return"0 B";const n=1024,h=["B","KB","MB","GB","TB","PB"],m=Math.floor(Math.log(i)/Math.log(n));return`${(i/Math.pow(n,m)).toFixed(2)} ${h[m]}`},ht=(i,n=50)=>{if(!i||i.length<=n)return i;const h=Math.floor((n-3)/2);let m=i.substring(0,h),v=i.substring(i.length-h);const D=m.lastIndexOf("/"),X=v.indexOf("/");return D>0&&X>=0&&(m=m.substring(0,D),v=v.substring(X+1)),`${m}...${v}`};return St(async()=>{await it(),await ct(),await Ke(),await dt(),me()}),Et(()=>{we()}),xt(J,()=>{W.value=1,me(),ye()}),(i,n)=>{const h=b("el-alert"),m=b("el-input"),v=b("el-button"),D=b("el-tag"),X=b("el-icon"),K=b("el-pagination"),V=b("el-table-column"),A=b("el-table"),O=b("el-divider"),$e=b("el-tree"),Pe=b("el-checkbox"),je=b("el-checkbox-group"),Me=b("el-card"),ee=b("el-descriptions-item"),He=b("el-descriptions"),yt=b("el-progress"),et=Jt("loading");return u(),_("div",ys,[te.value?(u(),R(h,{key:0,title:te.value,type:"error","show-icon":"",closable:!1,center:"",style:{"margin-bottom":"15px"}},null,8,["title"])):x("",!0),r("div",ws,[a(m,{modelValue:J.value,"onUpdate:modelValue":n[0]||(n[0]=y=>J.value=y),placeholder:"搜索名称...",clearable:"",class:"search-input",style:{width:"300px","margin-right":"15px"}},null,8,["modelValue"]),a(v,{type:"primary",onClick:ne,plain:"",style:{"margin-right":"15px"}},{default:s(()=>[...n[10]||(n[10]=[o(" 筛选 ",-1)])]),_:1}),Z.value?(u(),_("div",bs,[a(D,{type:"info",size:"default",effect:"plain"},{default:s(()=>[o(c(We.value),1)]),_:1}),a(v,{type:"danger",link:"",style:{padding:"0","margin-left":"8px"},onClick:T},{default:s(()=>[...n[11]||(n[11]=[o("清除",-1)])]),_:1})])):x("",!0),a(v,{type:"warning",onClick:pt,plain:"",style:{"margin-right":"15px"}},{default:s(()=>[a(X,{style:{"margin-right":"5px"}},{default:s(()=>[a(Ut(gs))]),_:1}),n[12]||(n[12]=o(" 设置优先级 ",-1))]),_:1}),a(v,{type:"success",onClick:q,plain:"",style:{"margin-right":"15px"},disabled:H.value.length===0},{default:s(()=>[o(" 批量获取数据 ("+c(H.value.length)+") ",1)]),_:1},8,["disabled"]),Y.value?(u(),R(v,{key:1,type:"info",onClick:Ye,plain:"",style:{"margin-right":"15px"}},{default:s(()=>[...n[13]||(n[13]=[o(" 查看进度 ",-1)])]),_:1})):x("",!0),re.value.length>0?(u(),_("div",ks,[a(K,{"current-page":W.value,"onUpdate:currentPage":n[1]||(n[1]=y=>W.value=y),"page-size":C.value,"onUpdate:pageSize":n[2]||(n[2]=y=>C.value=y),"page-sizes":[20,50,100],total:Be.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:ut,onCurrentChange:he,background:""},null,8,["current-page","page-size","total"])])):x("",!0)]),r("div",Ss,[lt((u(),R(A,{data:re.value,border:"",style:{width:"100%"},"empty-text":"暂无种子数据",height:"100%",onSelectionChange:ue},{default:s(()=>[a(V,{type:"selection",width:"55",align:"center","header-align":"center"}),a(V,{prop:"name",label:"种子名称","min-width":"400","show-overflow-tooltip":"","header-align":"center"}),a(V,{prop:"size",label:"大小",width:"110",align:"center","header-align":"center"},{default:s(y=>[o(c(mt(y.row.size)),1)]),_:1}),a(V,{prop:"save_path",label:"保存路径",width:"200","header-align":"center"},{default:s(y=>[r("div",{title:y.row.save_path,style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},c(ht(y.row.save_path,30)),9,xs)]),_:1}),a(V,{prop:"site_count",label:"站点数",width:"100",align:"center","header-align":"center"},{default:s(y=>[o(c(Object.keys(y.row.sites||{}).length),1)]),_:1}),a(V,{prop:"state",label:"状态",width:"120",align:"center","header-align":"center"}),a(V,{label:"已有源站点","min-width":"200","header-align":"center"},{default:s(y=>[(u(!0),_(Ie,null,Ee(E(y.row.sites),(G,ce)=>(u(),R(D,{key:ce,size:"small",type:"success",style:{margin:"2px"}},{default:s(()=>[o(c(ce),1)]),_:2},1024))),128)),Object.keys(E(y.row.sites)).length===0?(u(),_("span",Cs," 无可用源站点 ")):x("",!0)]),_:1})]),_:1},8,["data"])),[[et,Se.value]])]),_e.value?(u(),_("div",{key:1,class:"filter-overlay",onClick:n[8]||(n[8]=Ct(y=>_e.value=!1,["self"]))},[a(Me,{class:"filter-card"},{header:s(()=>[r("div",Ds,[n[15]||(n[15]=r("span",null,"筛选选项",-1)),a(v,{type:"danger",circle:"",onClick:n[3]||(n[3]=y=>_e.value=!1),plain:""},{default:s(()=>[...n[14]||(n[14]=[o("X",-1)])]),_:1})])]),default:s(()=>[r("div",$s,[a(O,{"content-position":"left"},{default:s(()=>[...n[16]||(n[16]=[o("保存路径",-1)])]),_:1}),r("div",zs,[a($e,{ref_key:"pathTreeRef",ref:Q,data:ae.value,"show-checkbox":"","node-key":"path","default-expand-all":"","expand-on-click-node":!1,"check-on-click-node":"","check-strictly":!0,props:{class:"path-tree-node"}},null,8,["data"])]),a(O,{"content-position":"left"},{default:s(()=>[...n[17]||(n[17]=[o("源站点",-1)])]),_:1}),a(je,{modelValue:L.value.sourceSiteAvailability,"onUpdate:modelValue":n[4]||(n[4]=y=>L.value.sourceSiteAvailability=y)},{default:s(()=>[a(Pe,{label:"存在源站点"},{default:s(()=>[...n[18]||(n[18]=[o("存在源站点",-1)])]),_:1}),a(Pe,{label:"无可用源站点"},{default:s(()=>[...n[19]||(n[19]=[o("无可用源站点",-1)])]),_:1})]),_:1},8,["modelValue"]),a(O,{"content-position":"left"},{default:s(()=>[...n[20]||(n[20]=[o("状态",-1)])]),_:1}),a(je,{modelValue:L.value.states,"onUpdate:modelValue":n[5]||(n[5]=y=>L.value.states=y)},{default:s(()=>[(u(!0),_(Ie,null,Ee(Ue.value,y=>(u(),R(Pe,{key:y,label:y},{default:s(()=>[o(c(y),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"]),a(O,{"content-position":"left"},{default:s(()=>[...n[21]||(n[21]=[o("下载器",-1)])]),_:1}),a(je,{modelValue:L.value.downloaderIds,"onUpdate:modelValue":n[6]||(n[6]=y=>L.value.downloaderIds=y)},{default:s(()=>[(u(!0),_(Ie,null,Ee(Ce.value,y=>(u(),R(Pe,{key:y.id,label:y.id},{default:s(()=>[o(c(y.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),r("div",Ts,[a(v,{onClick:n[7]||(n[7]=y=>_e.value=!1)},{default:s(()=>[...n[22]||(n[22]=[o("取消",-1)])]),_:1}),a(v,{type:"primary",onClick:Ge},{default:s(()=>[...n[23]||(n[23]=[o("确认",-1)])]),_:1})])]),_:1})])):x("",!0),P.value?(u(),_("div",Is,[a(Me,{class:"batch-fetch-card",shadow:"always"},{header:s(()=>[r("div",Bs,[n[25]||(n[25]=r("span",null,"批量获取种子数据",-1)),a(v,{type:"danger",circle:"",onClick:Je,plain:""},{default:s(()=>[...n[24]||(n[24]=[o("X",-1)])]),_:1})])]),default:s(()=>[r("div",Rs,[r("div",Vs,[r("h3",null,"已选择 "+c(H.value.length)+" 个种子",1),n[26]||(n[26]=r("p",{style:{color:"#909399","font-size":"13px","margin-top":"5px"}}," 系统将按名称聚合，逐个从源站点获取种子数据并存储到数据库 ",-1))])]),r("div",Fs,[a(v,{onClick:Je},{default:s(()=>[...n[27]||(n[27]=[o("取消",-1)])]),_:1}),a(v,{type:"primary",onClick:gt},{default:s(()=>[...n[28]||(n[28]=[o(" 开始批量获取 ",-1)])]),_:1})])]),_:1})])):x("",!0),xe.value?(u(),_("div",Ps,[a(Me,{class:"priority-settings-card",shadow:"always"},{header:s(()=>[r("div",Ms,[n[30]||(n[30]=r("span",null,"源站点优先级设置",-1)),a(v,{type:"danger",circle:"",onClick:qe,plain:""},{default:s(()=>[...n[29]||(n[29]=[o("X",-1)])]),_:1})])]),default:s(()=>[r("div",Ns,[a(h,{type:"info","show-icon":"",closable:!1,style:{"margin-bottom":"20px"}},{title:s(()=>[...n[31]||(n[31]=[o(" 设置批量获取种子数据时的源站点优先级顺序，系统将按顺序查找第一个可用的源站点",-1),r("br",null,null,-1),o(" 如果第一个源站点无法获取会按顺序自动切换源站点 ",-1)])]),_:1}),r("div",As,[n[32]||(n[32]=r("p",{style:{color:"#606266","font-size":"14px","margin-bottom":"10px","font-weight":"600"}}," 源站点优先级顺序： ",-1)),lt((u(),_("div",Os,[(u(!0),_(Ie,null,Ee(M.value,(y,G)=>(u(),R(D,{key:y.name,type:ft(G),size:"large",draggable:"true",onDragstart:ce=>N(G),onDragover:n[9]||(n[9]=Ct(()=>{},["prevent"])),onDrop:ce=>Fe(G),style:{margin:"5px",cursor:"move","user-select":"none"}},{default:s(()=>[o(c(G+1)+". "+c(y.name),1)]),_:2},1032,["type","onDragstart","onDrop"]))),128)),M.value.length===0?(u(),_("span",Ls," 未配置源站点优先级 ")):x("",!0)])),[[et,U.value]]),n[33]||(n[33]=r("div",{class:"priority-tip",style:{"margin-top":"10px","font-size":"12px",color:"#909399"}}," 拖拽调整优先级顺序，系统将按此顺序查找可用的源站点。 ",-1))])]),r("div",Es,[a(v,{onClick:qe},{default:s(()=>[...n[34]||(n[34]=[o("取消",-1)])]),_:1}),a(v,{type:"primary",onClick:Qe,loading:se.value},{default:s(()=>[...n[35]||(n[35]=[o(" 保存设置 ",-1)])]),_:1},8,["loading"])])]),_:1})])):x("",!0),ge.value?(u(),_("div",Us,[a(Me,{class:"progress-card",shadow:"always"},{header:s(()=>[r("div",Js,[r("span",null,"批量获取进度 "+c(k.value.isRunning?"(进行中...)":"(已完成)"),1),r("div",qs,[k.value.isRunning?(u(),R(v,{key:0,type:"warning",size:"small",onClick:we},{default:s(()=>[...n[36]||(n[36]=[o(" 停止自动刷新 ",-1)])]),_:1})):(u(),R(v,{key:1,type:"primary",size:"small",onClick:Xe},{default:s(()=>[...n[37]||(n[37]=[o(" 刷新 ",-1)])]),_:1})),a(v,{type:"danger",circle:"",onClick:Ze,plain:""},{default:s(()=>[...n[38]||(n[38]=[o("X",-1)])]),_:1})])])]),default:s(()=>[r("div",Xs,[r("div",js,[a(He,{column:2,border:""},{default:s(()=>[a(ee,{label:"总数"},{default:s(()=>[o(c(k.value.total),1)]),_:1}),a(ee,{label:"已处理"},{default:s(()=>[o(c(k.value.processed),1)]),_:1}),a(ee,{label:"成功"},{default:s(()=>[a(D,{type:"success",size:"small"},{default:s(()=>[o(c(k.value.success),1)]),_:1})]),_:1}),a(ee,{label:"失败"},{default:s(()=>[a(D,{type:"danger",size:"small"},{default:s(()=>[o(c(k.value.failed),1)]),_:1})]),_:1}),a(ee,{label:"跳过"},{default:s(()=>[a(D,{type:"info",size:"small"},{default:s(()=>[o(c(k.value.skipped),1)]),_:1})]),_:1}),a(ee,{label:"状态"},{default:s(()=>[a(D,{type:k.value.isRunning?"warning":"success",size:"small"},{default:s(()=>[o(c(k.value.isRunning?"进行中":"已完成"),1)]),_:1},8,["type"])]),_:1})]),_:1}),k.value.bdinfo_stats?(u(),_("div",Hs,[n[39]||(n[39]=r("h4",{style:{margin:"15px 0 10px 0","font-size":"14px",color:"#606266"}},"BDInfo 处理状态",-1)),a(He,{column:3,border:"",size:"small"},{default:s(()=>[a(ee,{label:"处理中"},{default:s(()=>[a(D,{type:"warning",size:"small"},{default:s(()=>[o(c(k.value.bdinfo_stats.processing),1)]),_:1})]),_:1}),a(ee,{label:"已完成"},{default:s(()=>[a(D,{type:"success",size:"small"},{default:s(()=>[o(c(k.value.bdinfo_stats.completed),1)]),_:1})]),_:1}),a(ee,{label:"失败"},{default:s(()=>[a(D,{type:"danger",size:"small"},{default:s(()=>[o(c(k.value.bdinfo_stats.failed),1)]),_:1})]),_:1})]),_:1})])):x("",!0),a(yt,{percentage:ve.value,status:De.value,style:{"margin-top":"15px"}},null,8,["percentage","status"])]),a(O,{"content-position":"left"},{default:s(()=>[...n[40]||(n[40]=[o("处理详情",-1)])]),_:1}),r("div",Ws,[a(A,{data:k.value.results,style:{width:"100%"},size:"small",stripe:"","max-height":"400"},{default:s(()=>[a(V,{prop:"name",label:"种子名称","min-width":"300","show-overflow-tooltip":""}),a(V,{prop:"status",label:"状态",width:"100",align:"center"},{default:s(y=>[a(D,{type:oe(y.row.status),size:"small"},{default:s(()=>[o(c(vt(y.row.status)),1)]),_:2},1032,["type"])]),_:1}),a(V,{prop:"source_site",label:"源站点",width:"120",align:"center"}),a(V,{prop:"reason",label:"失败原因","min-width":"200","show-overflow-tooltip":""})]),_:1},8,["data"])])]),r("div",Ks,[a(v,{onClick:Ze},{default:s(()=>[...n[41]||(n[41]=[o("关闭",-1)])]),_:1})])]),_:1})])):x("",!0)])}}}),Ys=Xt(Qs,[["__scopeId","data-v-800168e6"]]),Zs={class:"cross-seed-data-view"},ea={class:"search-and-controls glass-table"},ta={key:0,class:"current-filters",style:{"margin-right":"15px",display:"flex","align-items":"center"}},sa={key:1,class:"pagination-controls"},aa={class:"filter-card-header"},la={class:"filter-card-body"},na={class:"path-tree-container"},oa={class:"target-sites-container"},ra={class:"selected-site-display"},ia={key:0,class:"selected-site-info"},da={key:1,class:"selected-site-info"},ua={class:"target-sites-radio-container"},ca={class:"filter-card-footer"},pa={class:"table-container"},fa={class:"mapped-cell"},ga={class:"title-cell"},_a=["title"],va=["title"],ma={class:"tags-cell"},ha={class:"mapped-cell datetime-cell"},ya={key:2,class:"modal-overlay"},wa={class:"modal-header"},ba={class:"cross-seed-content"},ka={key:3,class:"modal-overlay"},Sa={class:"modal-header"},xa={class:"batch-cross-seed-content"},Ca={class:"target-site-selection-body"},Da={class:"batch-info"},$a={class:"batch-cross-seed-footer"},za={key:4,class:"modal-overlay"},Ta={class:"modal-header"},Ia={class:"record-header-controls"},Ba={class:"record-view-content"},Ra={class:"tab-header"},Va={class:"tab-controls"},Fa={key:0,class:"records-table-container"},Pa={key:0},Ma={key:1},Na={key:0,class:"progress-cell"},Aa={class:"progress-text"},Oa={key:1},La={key:0},Ea={key:1},Ua={key:2},Ja={key:1},qa={class:"mapped-cell datetime-cell"},Xa={key:1,class:"no-records"},ja={class:"tab-header"},Ha={class:"bdinfo-filter-controls"},Wa={class:"tab-controls"},Ka={key:0,class:"bdinfo-records-table-container"},Ga={class:"mapped-cell"},Qa={key:0},Ya={key:1},Za={key:0},el={key:1},tl={key:0},sl={key:1},al={key:0,style:{"text-align":"center"}},ll={style:{"font-size":"12px","margin-top":"4px",color:"#606266"}},nl={key:1,style:{"text-align":"center"}},ol={key:2},rl={key:1,class:"no-records"},il={class:"record-view-footer"},dl={key:5,class:"modal-overlay"},ul={class:"modal-header"},cl={class:"bdinfo-detail-content"},pl={key:0,class:"task-id-cell"},fl={key:1},gl={key:0,class:"error-section"},_l={key:1,class:"mediainfo-section"},vl={style:{margin:"15px 0 10px 0",color:"#606266"}},ml={style:{"margin-top":"10px","text-align":"right"}},hl={class:"bdinfo-detail-footer"},yl={key:6,class:"modal-overlay"},wl={class:"modal-header"},bl={class:"batch-fetch-main-content"},kl=5e3,Sl=5e3,xl=Lt({__name:"CrossSeedDataView",emits:["ready"],setup(jt,{emit:nt}){const ot=nt;St(()=>{ot("ready",N)});const re=g({type:{},medium:{},video_codec:{},audio_codec:{},resolution:{},source:{},team:{},tags:{},site_name:{}}),Se=g([]),te=g(!0),H=g(null),P=g([]),ge=g(!1),xe=g(!1),U=g(!1),se=g(!1),M=g([]),ie=g(!1),Q=g(new Map),ae=g("cross-seed"),le=g([]),Ue=g(!1),Ce=g(""),W=g(!1),C=g(null),Be=g(new Set),J=g(null),_e=g(0),B=g(null),L=g(!1),Y=g(null),k=g([]),Re=g([]),We=g(window.innerHeight-80),Z=g(1),de=g(20),Ke=g(0),ve=g(""),De=g(""),rt=async t=>{De.value=t,Z.value=1;try{await $.post("/api/config/cross_seed_review_filter",{review_filter:t})}catch(e){console.error("保存检查状态筛选失败:",e)}N()},me=j(()=>{const t=T.value,e=[];return t.paths&&t.paths.length>0&&e.push(`路径: ${t.paths.length}`),t.isDeleted==="0"?e.push("未删除"):t.isDeleted==="1"&&e.push("已删除"),t.excludeTargetSites&&t.excludeTargetSites.trim()!==""&&e.push(`不存在于: ${t.excludeTargetSites}`),e.join(", ")}),it=j(()=>P.value.length>0&&T.value.excludeTargetSites&&T.value.excludeTargetSites.trim()!==""),dt=j(()=>{const t=P.value.length,e=T.value.excludeTargetSites;return!e||e.trim()===""?`批量转种 (${t}) - 请先在筛选中选择目标站点`:`批量转种到 ${e} (${t})`}),ut=j(()=>{const t=T.value;return t.paths&&t.paths.length>0||t.isDeleted!==""||t.excludeTargetSites&&t.excludeTargetSites.trim()!==""}),he=g(!1),T=g({paths:[],isDeleted:"",excludeTargetSites:""}),ne=g({...T.value}),Ge=g([]),ye=j({get:()=>ne.value.excludeTargetSites||"",set:t=>{ne.value.excludeTargetSites=t}}),ct=()=>{ne.value.excludeTargetSites=""},ue=(t,e)=>{if(!e)return"";const d=re.value[t];return d&&d[e]||e},E=t=>t?/^[^.]+[.][^.]+$/.test(t):!0,q=(t,e)=>{if(!e)return!0;const d=re.value[t];return d?!!d[e]:!1},Je=t=>{let e=[];if(typeof t=="string")try{e=JSON.parse(t)}catch{e=t.split(",").map(d=>d.trim()).filter(d=>d)}else Array.isArray(t)&&(e=t);return e.length===0?[]:e.map(d=>re.value.tags[d]||d)},pt=(t,e)=>{let d=[];if(typeof t=="string")try{d=JSON.parse(t)}catch{d=t.split(",").map(p=>p.trim()).filter(p=>p)}else Array.isArray(t)&&(d=t);if(d.length===0||e>=d.length)return"info";const f=d[e];return f==="禁转"||f==="tag.禁转"||f==="限转"||f==="tag.限转"||!E(f)||!q("tags",f)?"danger":"info"},qe=(t,e)=>{let d=[];if(typeof t=="string")try{d=JSON.parse(t)}catch{d=t.split(",").map(p=>p.trim()).filter(p=>p)}else Array.isArray(t)&&(d=t);if(d.length===0||e>=d.length)return"";const f=d[e];return f==="禁转"||f==="tag.禁转"||f==="限转"||f==="tag.限转"?"restricted-tag":!E(f)||!q("tags",f)?"invalid-tag":""},Ve=t=>{if(!t)return"";try{const e=new Date(t);if(isNaN(e.getTime()))return t;const d=e.getFullYear(),f=String(e.getMonth()+1).padStart(2,"0"),p=String(e.getDate()).padStart(2,"0"),z=String(e.getHours()).padStart(2,"0"),I=String(e.getMinutes()).padStart(2,"0"),F=String(e.getSeconds()).padStart(2,"0");return`${d}-${f}-${p}
${z}:${I}:${F}`}catch{return t}},Qe=t=>{const e=["type","medium","video_codec","audio_codec","resolution","team","source"];for(const f of e){const p=t[f];if(p&&(!E(p)||!q(f,p)))return!0}let d=[];if(typeof t.tags=="string")try{d=JSON.parse(t.tags)}catch{d=t.tags.split(",").map(f=>f.trim()).filter(f=>f)}else Array.isArray(t.tags)&&(d=t.tags);for(const f of d)if(!E(f)||!q("tags",f))return!0;return!!t.unrecognized},ft=t=>{const e=[],d=new Map;return t.sort().forEach(f=>{const p=f.replace(/^\/|\/$/g,"").split("/");let z="",I=e;p.forEach((F,Te)=>{if(z=Te===0?`/${F}`:`${z}/${F}`,!d.has(z)){const st={path:Te===p.length-1?f:z,label:F,children:[]};d.set(z,st),I.push(st)}I=d.get(z).children})}),d.forEach(f=>{f.children&&f.children.length===0&&delete f.children}),e},N=async()=>{te.value=!0,H.value=null;try{const t=new URLSearchParams({page:Z.value.toString(),page_size:de.value.toString(),search:ve.value,path_filters:JSON.stringify(T.value.paths||[]),is_deleted:T.value.isDeleted,exclude_target_sites:T.value.excludeTargetSites,review_status:De.value});T.value.excludeTargetSites&&console.log("发送目标站点排除参数:",T.value.excludeTargetSites);const d=(await $.get(`/api/cross-seed-data?${t.toString()}`)).data;d.success?(Se.value=d.data,Ke.value=d.total,d.reverse_mappings&&(re.value=d.reverse_mappings),d.unique_paths&&(Re.value=d.unique_paths,k.value=ft(d.unique_paths)),d.target_sites&&(Ge.value=d.target_sites)):(H.value=d.error||"获取数据失败",w.error(d.error||"获取数据失败"))}catch(t){H.value=t.message||"网络错误",w.error(t.message||"网络错误")}finally{te.value=!1}},Fe=async()=>{try{const t={page_size:de.value,search_query:ve.value,active_filters:T.value};await $.post("/api/ui_settings/cross_seed",t)}catch(t){console.error("无法保存UI设置:",t.message)}},gt=async()=>{try{const e=(await $.get("/api/ui_settings/cross_seed")).data;de.value=e.page_size??20,ve.value=e.search_query??"",e.active_filters&&Object.assign(T.value,e.active_filters)}catch(t){console.error("加载UI设置时出错:",t)}},Ye=t=>{de.value=t,Z.value=1,N(),Fe()},Ze=t=>{Z.value=t,N()},_t=()=>{T.value={paths:[],isDeleted:"",excludeTargetSites:""},Z.value=1,N(),Fe()},we=()=>{ne.value={...T.value},he.value=!0,qt(()=>{Y.value&&T.value.paths.length>0&&Y.value.setCheckedKeys(T.value.paths,!1)})},Xe=()=>{if(Y.value){const t=Y.value.getCheckedKeys(!1);ne.value.paths=t}T.value={...ne.value},he.value=!1,Z.value=1,N(),Fe()},oe=ms();xt(ve,()=>{Z.value=1,N(),Fe()});const vt=j(()=>!!oe.taskId),mt=j(()=>oe.workingParams?.title||""),ht=async t=>{try{oe.reset();const d=(await $.get(`/api/migrate/get_db_seed_info?torrent_id=${t.torrent_id}&site_name=${t.site_name}`)).data;if(d.success){const f={...d.data,name:d.data.name||d.data.title,save_path:d.data.save_path||"",size:0,size_formatted:"0 B",progress:100,state:"completed",total_uploaded:0,total_uploaded_formatted:"0 B",downloaderId:d.data.downloader_id||null,sites:{[d.data.site_name]:{torrentId:d.data.torrent_id,comment:`id=${d.data.torrent_id}`}}};oe.setParams(f);const p={name:d.data.site_name,site:d.data.site_name.toLowerCase(),torrentId:d.data.torrent_id};oe.setSourceInfo(p),oe.setTaskId(`cross_seed_${t.id}_${Date.now()}`)}else w.error(d.error||"获取种子参数失败")}catch(e){w.error(e.message||"网络错误")}},i=async t=>{try{await Ot.confirm(`确定要永久删除种子数据 "${t.title}" 吗？此操作无法恢复！`,"确认永久删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const e={torrent_id:t.torrent_id,site_name:t.site_name},f=(await $.post("/api/cross-seed-data/delete",e)).data;f.success?(w.success(f.message||"删除成功"),N()):w.error(f.error||"删除失败")}catch(e){e!=="cancel"&&w.error(e.message||"网络错误")}},n=()=>{oe.reset()},h=()=>{w.success("转种操作已完成！"),oe.reset(),N()},m=()=>{We.value=window.innerHeight-80};St(async()=>{await gt(),await v(),N(),window.addEventListener("resize",m)});const v=async()=>{try{const e=(await $.get("/api/config/cross_seed_review_filter")).data;e.success&&(De.value=e.data||"")}catch(t){console.error("加载检查状态筛选配置失败:",t)}},D=({row:t})=>t.is_deleted||X(t.tags)||t.unrecognized?"deleted-row":t.is_reviewed?K(t)?"":"selected-row-disabled":"unreviewed-row",X=t=>{let e=[];if(typeof t=="string")try{e=JSON.parse(t)}catch{e=t.split(",").map(d=>d.trim()).filter(d=>d)}else Array.isArray(t)&&(e=t);return e.some(d=>d==="禁转"||d==="tag.禁转"||d==="限转"||d==="tag.限转")},K=t=>U.value?!0:X(t.tags)?!1:T.value.isDeleted==="1"?!Qe(t):!(t.is_deleted||Qe(t)||!t.is_reviewed),V=t=>{P.value=t,U.value},A=()=>{ge.value=!0},O=async()=>{const t=T.value.excludeTargetSites;if(!t||t.trim()===""){w.warning("请先在筛选中选择目标站点");return}try{$e();const e={target_site_name:t,seeds:P.value.map(p=>({hash:p.hash,torrent_id:p.torrent_id,site_name:p.site_name,nickname:p.nickname}))};console.log("批量转种数据:",e),se.value=!0,ce();const f=(await $.post("/api/go-api/batch-enhance",e)).data;f.success?w.success(`批量转种请求已发送，成功 ${f.data.seeds_processed} 个，失败 ${f.data.seeds_failed} 个`):(pe(),w.error(f.error||"批量转种失败"))}catch(e){pe(),w.error(e.message||"网络错误")}},$e=()=>{ge.value=!1},Pe=()=>U.value?P.value.length===0?"退出删除模式":`删除选中项 (${P.value.length})`:"批量删除模式",je=async()=>{U.value?(U.value=!1,P.value=[]):(U.value=!0,P.value=[])},Me=async()=>{if(P.value.length===0){w.warning("请先选择要删除的行");return}try{await Ot.confirm(`确定要删除选中的 ${P.value.length} 条种子数据吗？此操作无法恢复！`,"确认批量删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const t={items:P.value.map(f=>({torrent_id:f.torrent_id,site_name:f.site_name}))},d=(await $.post("/api/cross-seed-data/delete",t)).data;d.success?(w.success(d.message||`成功删除 ${d.deleted_count} 条数据`),P.value=[],U.value=!1,N()):w.error(d.error||"批量删除失败")}catch(t){t!=="cancel"&&w.error(t.message||"网络错误")}},ee=()=>{xe.value=!0},He=()=>{xe.value=!1},yt=()=>{w.success("批量获取种子数据已完成，正在刷新列表..."),N()},et=t=>t?t.includes("成功")||t.includes("失败"):!1,y=j(()=>{if(M.value.length===0)return!1;const t=M.value[0];return!et(t.downloader_add_result)}),G=j(()=>le.value.some(t=>t.mediainfo_status==="processing_bdinfo"||t.mediainfo_status==="processing")),ce=()=>{pe(),Ne(),J.value=setInterval(async()=>{se.value?await Ne():pe()},kl)},pe=()=>{J.value&&(clearInterval(J.value),J.value=null),_e.value=0},Ht=()=>{se.value=!0,ae.value==="cross-seed"?(Ne(),ce()):ae.value==="bdinfo"&&(Ae(),G.value&&tt())},Dt=()=>{se.value=!1,pe(),ze(),N()},Ne=async()=>{try{wt();const e=(await $.get("/api/go-api/records")).data;M.value=e.records||[]}catch(t){console.error("获取记录时出错:",t),w.error("获取记录失败: "+(t.message||"网络错误"))}},Wt=async()=>{try{const t=await $.delete("/api/go-api/records");M.value=[],wt(),w.success("记录已清空")}catch{M.value=[],wt(),w.success("本地记录已清空")}},Kt=t=>{switch(t){case"success":return"success";case"failed":return"danger";case"filtered":return"warning";case"processing":return"primary";case"pending":return"info";default:return"info"}},Gt=t=>{switch(t){case"success":return"成功";case"failed":return"失败";case"filtered":return"已过滤";case"processing":return"处理中";case"pending":return"等待中";default:return"未知"}},Qt=async t=>{Ce.value=t,await Ae()},Ae=async()=>{try{const t=new URLSearchParams({status_filter:Ce.value}),e=new Map;for(const p of le.value)p.mediainfo_status==="processing_bdinfo"&&p.progress_info&&e.set(p.seed_id,p.progress_info);const f=(await $.get(`/api/migrate/bdinfo_records?${t.toString()}`)).data;if(f.success){const p=f.data||[];for(const I of p)I.mediainfo_status==="processing_bdinfo"&&e.has(I.seed_id)&&(I.progress_info=e.get(I.seed_id));le.value=p;const z=[];for(const I of le.value)if(I.mediainfo_status==="processing_bdinfo"&&I.bdinfo_task_id){const F=(async()=>{try{const be=(await $.get(`/api/migrate/bdinfo_status/${I.seed_id}`)).data;be.task_status&&be.progress_info&&(I.progress_info=be.progress_info)}catch(Te){console.error(`获取BDInfo进度失败: ${I.seed_id}`,Te)}})();z.push(F)}await Promise.all(z)}else w.error(f.message||"获取BDInfo记录失败")}catch(t){console.error("获取BDInfo记录时出错:",t),w.error(t.message||"网络错误")}},tt=()=>{ze(),B.value=setInterval(async()=>{se.value&&ae.value==="bdinfo"?(await Ae(),G.value||setTimeout(()=>{G.value||ze()},3e3)):ze()},Sl)},ze=()=>{B.value&&(clearInterval(B.value),B.value=null)},$t=t=>{switch(t){case"queued":return"info";case"processing_bdinfo":case"processing":return"warning";case"completed":return"success";case"failed":return"danger";default:return"info"}},zt=t=>{switch(t){case"queued":return"等待中";case"processing_bdinfo":case"processing":return"处理中";case"completed":return"已完成";case"failed":return"失败";default:return"未知"}},Tt=t=>{if(!t.bdinfo_started_at)return"-";const e=new Date(t.bdinfo_started_at),f=(t.bdinfo_completed_at?new Date(t.bdinfo_completed_at):new Date).getTime()-e.getTime();return f<0?"-":f<6e4?`${Math.floor(f/1e3)}秒`:f<36e5?`${Math.floor(f/6e4)}分钟`:`${Math.floor(f/36e5)}小时`},It=async t=>{try{await navigator.clipboard.writeText(t),w.success("已复制到剪贴板")}catch{w.error("复制失败")}},Yt=t=>{C.value=t,W.value=!0},Bt=()=>{W.value=!1,C.value=null},Zt=t=>{if(!t.bdinfo_started_at)return!0;const e=new Date(t.bdinfo_started_at),d=new Date;if((d.getTime()-e.getTime())/(1e3*60)>30){if(!t.progress_info||t.progress_info.progress_percent===0)return!0;if(t.progress_info.last_progress_update){const p=new Date(t.progress_info.last_progress_update),z=(d.getTime()-p.getTime())/(1e3*60);return t.progress_info.progress_percent<10?z>15:t.progress_info.progress_percent<50?z>10:z>5}}return!1},es=t=>t.mediainfo_status==="failed"?!0:t.mediainfo_status==="processing_bdinfo"?Zt(t):!1,ts=async t=>{try{Be.value.add(t.seed_id);try{await $.post("/api/migrate/cleanup_bdinfo_process",{seed_id:t.seed_id})}catch(f){console.warn("清理进程失败:",f)}const d=(await $.post("/api/migrate/restart_bdinfo",{seed_id:t.seed_id})).data;d.success?(w.success("BDInfo重新获取任务已启动"),await Ae(),G.value&&tt()):w.error(d.message||"启动BDInfo重新获取失败")}catch(e){w.error(e.message||"网络错误")}finally{Be.value.delete(t.seed_id)}},Rt=t=>t?(Q.value.has(t)||Q.value.set(t,Q.value.size+1),Q.value.get(t)):"-",ss=t=>{if(typeof t!="number")return"info";const e=["success","primary","warning","info"];return e[(t-1)%e.length]},wt=()=>{Q.value.clear()},as=t=>t.startsWith("成功")?"success":t.startsWith("失败")?"danger":"info",ls=t=>t.startsWith("成功")?"#67c23a":t.startsWith("失败")?"#f56c6c":"#909399",Vt=t=>t.startsWith("成功:")||t.startsWith("失败:")?t.substring(3):t,ns=t=>{if(!t)return t;const e=t.indexOf("&uploaded");return e!==-1?t.substring(0,e):t},os=t=>{try{const e=new Date(t);if(isNaN(e.getTime()))return t;const d=e.getFullYear(),f=String(e.getMonth()+1).padStart(2,"0"),p=String(e.getDate()).padStart(2,"0"),z=String(e.getHours()).padStart(2,"0"),I=String(e.getMinutes()).padStart(2,"0"),F=String(e.getSeconds()).padStart(2,"0");return`${d}-${f}-${p}
${z}:${I}:${F}`}catch{return t}},Ft=t=>{if(!t)return 0;const e=t.match(/(\d+)\/(\d+)/);if(e){const d=parseInt(e[1]),f=parseInt(e[2]);if(f>0)return Math.round(d/f*100)}return 0},rs=t=>t<30?"#e6a23c":t<70?"#409eff":"#67c23a",is=async()=>{L.value=!0;try{const e=(await $.post("/api/go-api/batch-enhance/stop")).data;e.success?(w.success("批量转种已停止"),pe(),await Ne()):w.error(e.error||"停止批量转种失败")}catch(t){w.error(t.message||"停止批量转种失败")}finally{L.value=!1}};return xt(ae,(t,e)=>{t==="cross-seed"?(Ne(),y.value&&ce()):t==="bdinfo"&&(Ae(),G.value&&tt()),e==="cross-seed"?pe():e==="bdinfo"&&ze()}),Et(()=>{window.removeEventListener("resize",m),pe(),ze()}),(t,e)=>{const d=b("el-alert"),f=b("el-input"),p=b("el-button"),z=b("el-radio-button"),I=b("el-radio-group"),F=b("el-tag"),Te=b("el-pagination"),be=b("el-divider"),st=b("el-tree"),at=b("el-radio"),Oe=b("el-card"),S=b("el-table-column"),bt=b("el-table"),kt=b("el-progress"),ds=b("el-link"),us=b("el-tooltip"),Pt=b("el-empty"),Mt=b("el-tab-pane"),cs=b("el-tabs"),ke=b("el-descriptions-item"),ps=b("el-icon"),fs=b("el-descriptions"),Nt=Jt("loading");return u(),_("div",Zs,[H.value?(u(),R(d,{key:0,title:H.value,type:"error","show-icon":"",closable:!1,style:{margin:"0","border-radius":"0"}},null,8,["title"])):x("",!0),r("div",ea,[a(f,{modelValue:ve.value,"onUpdate:modelValue":e[0]||(e[0]=l=>ve.value=l),placeholder:"搜索标题或种子ID...",clearable:"",class:"search-input",style:{width:"300px","margin-right":"15px"}},null,8,["modelValue"]),a(p,{type:"success",onClick:A,plain:"",style:{"margin-right":"15px"},disabled:!it.value||U.value},{default:s(()=>[o(c(dt.value),1)]),_:1},8,["disabled"]),a(p,{type:"info",onClick:Ht,plain:"",style:{"margin-right":"15px"}},{default:s(()=>[...e[14]||(e[14]=[o(" 日志 ",-1)])]),_:1}),a(p,{type:"warning",onClick:ee,plain:"",style:{"margin-right":"15px"}},{default:s(()=>[...e[15]||(e[15]=[o(" 获取数据 ",-1)])]),_:1}),a(p,{type:"danger",onClick:e[1]||(e[1]=l=>U.value&&P.value.length>0?Me():je()),plain:"",style:{"margin-right":"15px"}},{default:s(()=>[o(c(Pe()),1)]),_:1}),a(p,{type:"primary",onClick:we,plain:"",style:{"margin-right":"15px"}},{default:s(()=>[...e[16]||(e[16]=[o(" 筛选 ",-1)])]),_:1}),a(I,{modelValue:De.value,"onUpdate:modelValue":e[2]||(e[2]=l=>De.value=l),onChange:rt,style:{"margin-right":"15px"}},{default:s(()=>[a(z,{label:""},{default:s(()=>[...e[17]||(e[17]=[o("全部",-1)])]),_:1}),a(z,{label:"reviewed"},{default:s(()=>[...e[18]||(e[18]=[o("已检查",-1)])]),_:1}),a(z,{label:"unreviewed"},{default:s(()=>[...e[19]||(e[19]=[o("待检查",-1)])]),_:1}),a(z,{label:"error"},{default:s(()=>[...e[20]||(e[20]=[o("错误",-1)])]),_:1})]),_:1},8,["modelValue"]),ut.value?(u(),_("div",ta,[a(F,{type:"info",size:"default",effect:"plain"},{default:s(()=>[o(c(me.value),1)]),_:1}),a(p,{type:"danger",link:"",style:{padding:"0","margin-left":"8px"},onClick:_t},{default:s(()=>[...e[21]||(e[21]=[o("清除",-1)])]),_:1})])):x("",!0),Se.value.length>0?(u(),_("div",sa,[a(Te,{"current-page":Z.value,"onUpdate:currentPage":e[3]||(e[3]=l=>Z.value=l),"page-size":de.value,"onUpdate:pageSize":e[4]||(e[4]=l=>de.value=l),"page-sizes":[20,50,100],total:Ke.value,layout:"total, sizes, prev, pager, next",onSizeChange:Ye,onCurrentChange:Ze,background:""},null,8,["current-page","page-size","total"])])):x("",!0)]),he.value?(u(),_("div",{key:1,class:"filter-overlay",onClick:e[9]||(e[9]=Ct(l=>he.value=!1,["self"]))},[a(Oe,{class:"filter-card"},{header:s(()=>[r("div",aa,[e[23]||(e[23]=r("span",null,"筛选选项",-1)),a(p,{type:"danger",circle:"",onClick:e[5]||(e[5]=l=>he.value=!1),plain:""},{default:s(()=>[...e[22]||(e[22]=[o("X",-1)])]),_:1})])]),default:s(()=>[r("div",la,[a(be,{"content-position":"left"},{default:s(()=>[...e[24]||(e[24]=[o("保存路径",-1)])]),_:1}),r("div",na,[a(st,{ref_key:"pathTreeRef",ref:Y,data:k.value,"show-checkbox":"","node-key":"path","default-expand-all":"","expand-on-click-node":!1,"check-on-click-node":"","check-strictly":!0,props:{class:"path-tree-node"}},null,8,["data"])]),a(be,{"content-position":"left"},{default:s(()=>[...e[25]||(e[25]=[o("删除状态",-1)])]),_:1}),a(I,{modelValue:ne.value.isDeleted,"onUpdate:modelValue":e[6]||(e[6]=l=>ne.value.isDeleted=l),style:{width:"100%"}},{default:s(()=>[a(at,{label:""},{default:s(()=>[...e[26]||(e[26]=[o("全部",-1)])]),_:1}),a(at,{label:"0"},{default:s(()=>[...e[27]||(e[27]=[o("未删除",-1)])]),_:1}),a(at,{label:"1"},{default:s(()=>[...e[28]||(e[28]=[o("已删除",-1)])]),_:1})]),_:1},8,["modelValue"]),a(be,{"content-position":"left"},{default:s(()=>[...e[29]||(e[29]=[o("不存在种子筛选",-1)])]),_:1}),r("div",oa,[r("div",ra,[ye.value?(u(),_("div",ia,[a(F,{type:"info",size:"default",effect:"plain"},{default:s(()=>[o("已选择: "+c(ye.value),1)]),_:1}),a(p,{type:"danger",link:"",style:{padding:"0","margin-left":"8px"},onClick:ct},{default:s(()=>[...e[30]||(e[30]=[o("清除",-1)])]),_:1})])):(u(),_("div",da,[a(F,{type:"info",size:"default",effect:"plain"},{default:s(()=>[...e[31]||(e[31]=[o("未选择",-1)])]),_:1})]))]),r("div",ua,[a(I,{modelValue:ye.value,"onUpdate:modelValue":e[7]||(e[7]=l=>ye.value=l),class:"target-sites-radio-group"},{default:s(()=>[(u(!0),_(Ie,null,Ee(Ge.value,l=>(u(),R(at,{key:l,label:l,class:"target-site-radio"},{default:s(()=>[o(c(l),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])])])]),r("div",ca,[a(p,{onClick:e[8]||(e[8]=l=>he.value=!1)},{default:s(()=>[...e[32]||(e[32]=[o("取消",-1)])]),_:1}),a(p,{type:"primary",onClick:Xe},{default:s(()=>[...e[33]||(e[33]=[o("确认",-1)])]),_:1})])]),_:1})])):x("",!0),r("div",pa,[lt((u(),R(bt,{data:Se.value,border:"",style:{width:"100%"},"empty-text":"暂无转种数据","max-height":We.value,height:"100%","row-class-name":D,onSelectionChange:V,class:"glass-table"},{default:s(()=>[a(S,{type:"selection",width:"55",align:"center",selectable:K}),a(S,{prop:"torrent_id",label:"种子ID",align:"center",width:"80","show-overflow-tooltip":""}),a(S,{prop:"nickname",label:"站点名称",width:"100",align:"center"},{default:s(l=>[r("div",fa,c(l.row.nickname),1)]),_:1}),a(S,{prop:"title",label:"标题",align:"center"},{default:s(l=>[r("div",ga,[r("div",{class:"subtitle-line",title:l.row.subtitle},c(l.row.subtitle||""),9,_a),r("div",{class:"main-title-line",title:l.row.title},c(l.row.title||""),9,va)])]),_:1}),a(S,{prop:"type",label:"类型",width:"100",align:"center"},{default:s(l=>[r("div",{class:fe(["mapped-cell",{"invalid-value":!E(l.row.type)||!q("type",l.row.type)}])},c(ue("type",l.row.type)),3)]),_:1}),a(S,{prop:"medium",label:"媒介",width:"100",align:"center"},{default:s(l=>[r("div",{class:fe(["mapped-cell",{"invalid-value":!E(l.row.medium)||!q("medium",l.row.medium)}])},c(ue("medium",l.row.medium)),3)]),_:1}),a(S,{prop:"video_codec",label:"视频编码",width:"120",align:"center"},{default:s(l=>[r("div",{class:fe(["mapped-cell",{"invalid-value":!E(l.row.video_codec)||!q("video_codec",l.row.video_codec)}])},c(ue("video_codec",l.row.video_codec)),3)]),_:1}),a(S,{prop:"audio_codec",label:"音频编码",width:"90",align:"center"},{default:s(l=>[r("div",{class:fe(["mapped-cell",{"invalid-value":!E(l.row.audio_codec)||!q("audio_codec",l.row.audio_codec)}])},c(ue("audio_codec",l.row.audio_codec)),3)]),_:1}),a(S,{prop:"resolution",label:"分辨率",width:"90",align:"center"},{default:s(l=>[r("div",{class:fe(["mapped-cell",{"invalid-value":!E(l.row.resolution)||!q("resolution",l.row.resolution)}])},c(ue("resolution",l.row.resolution)),3)]),_:1}),a(S,{prop:"team",label:"制作组",width:"120",align:"center"},{default:s(l=>[r("div",{class:fe(["mapped-cell",{"invalid-value":!E(l.row.team)||!q("team",l.row.team)}])},c(ue("team",l.row.team)),3)]),_:1}),a(S,{prop:"source",label:"产地",width:"100",align:"center"},{default:s(l=>[r("div",{class:fe(["mapped-cell",{"invalid-value":!E(l.row.source)||!q("source",l.row.source)}])},c(ue("source",l.row.source)),3)]),_:1}),a(S,{prop:"tags",label:"标签",align:"center",width:"170"},{default:s(l=>[r("div",ma,[(u(!0),_(Ie,null,Ee(Je(l.row.tags),(Le,At)=>(u(),R(F,{key:Le,size:"small",type:pt(l.row.tags,At),class:fe(qe(l.row.tags,At)),style:{margin:"2px"}},{default:s(()=>[o(c(Le),1)]),_:2},1032,["type","class"]))),128))])]),_:1}),a(S,{prop:"unrecognized",label:"无法识别",width:"120",align:"center"},{default:s(l=>[r("div",{class:fe(["mapped-cell",{"invalid-value":l.row.unrecognized}])},c(l.row.unrecognized||""),3)]),_:1}),a(S,{prop:"updated_at",label:"更新时间",width:"140",align:"center",sortable:""},{default:s(l=>[r("div",ha,c(l.row.is_deleted||X(l.row.tags)?"已删除/禁转":Ve(l.row.updated_at)),1)]),_:1}),a(S,{label:"操作",width:"130",align:"center",fixed:"right"},{default:s(l=>[a(p,{size:"small",type:"primary",onClick:Le=>ht(l.row)},{default:s(()=>[...e[34]||(e[34]=[o("编辑",-1)])]),_:1},8,["onClick"]),a(p,{size:"small",type:"danger",onClick:Le=>i(l.row),style:{"margin-left":"5px"}},{default:s(()=>[...e[35]||(e[35]=[o("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data","max-height"])),[[Nt,te.value]])]),vt.value?(u(),_("div",ya,[a(Oe,{class:"cross-seed-card",shadow:"always"},{header:s(()=>[r("div",wa,[r("span",null,"转种 - "+c(mt.value),1),a(p,{type:"danger",circle:"",onClick:n,plain:""},{default:s(()=>[...e[36]||(e[36]=[o("X",-1)])]),_:1})])]),default:s(()=>[r("div",ba,[a(hs,{"show-complete-button":!0,onComplete:h,onCancel:n})])]),_:1})])):x("",!0),ge.value?(u(),_("div",ka,[a(Oe,{class:"batch-cross-seed-card",shadow:"always"},{header:s(()=>[r("div",Sa,[e[38]||(e[38]=r("span",null,"批量转种",-1)),a(p,{type:"danger",circle:"",onClick:$e,plain:""},{default:s(()=>[...e[37]||(e[37]=[o("X",-1)])]),_:1})])]),default:s(()=>[r("div",xa,[r("div",Ca,[r("div",Da,[r("p",null,[e[39]||(e[39]=r("strong",null,"目标站点：",-1)),o(c(T.value.excludeTargetSites),1)]),r("p",null,[e[40]||(e[40]=r("strong",null,"选中种子数量：",-1)),o(c(P.value.length)+" 个",1)]),e[41]||(e[41]=r("p",{style:{color:"#909399","font-size":"13px","margin-top":"10px"}}," 将把选中的种子转种到上述目标站点，请确认无误后点击确定。 ",-1))])])]),r("div",$a,[a(p,{onClick:$e},{default:s(()=>[...e[42]||(e[42]=[o("取消",-1)])]),_:1}),a(p,{type:"primary",onClick:O},{default:s(()=>[...e[43]||(e[43]=[o("确定",-1)])]),_:1})])]),_:1})])):x("",!0),se.value?(u(),_("div",za,[a(Oe,{class:"record-view-card",shadow:"always"},{header:s(()=>[r("div",Ta,[e[45]||(e[45]=r("span",null,"日志记录",-1)),r("div",Ia,[a(p,{type:"danger",circle:"",onClick:Dt,plain:""},{default:s(()=>[...e[44]||(e[44]=[o("X",-1)])]),_:1})])])]),default:s(()=>[r("div",Ba,[a(cs,{modelValue:ae.value,"onUpdate:modelValue":e[11]||(e[11]=l=>ae.value=l),type:"border-card",class:"record-tabs"},{default:s(()=>[a(Mt,{label:"批量转种记录",name:"cross-seed"},{label:s(()=>[...e[46]||(e[46]=[r("span",null,"批量转种记录",-1)])]),default:s(()=>[r("div",Ra,[e[50]||(e[50]=r("div",{class:"record-warning-text"},"批量转种需要等待种子文件验证，每个种子大概3s",-1)),r("div",Va,[a(p,{type:"danger",size:"small",onClick:is,disabled:L.value},{default:s(()=>[o(c(L.value?"停止中...":"停止转种"),1)]),_:1},8,["disabled"]),a(p,{type:"primary",size:"small",onClick:Ne,loading:ie.value},{default:s(()=>[...e[47]||(e[47]=[o(" 刷新 ",-1)])]),_:1},8,["loading"]),J.value?(u(),R(p,{key:0,type:"warning",size:"small",onClick:pe},{default:s(()=>[...e[48]||(e[48]=[o(" 停止自动刷新 ",-1)])]),_:1})):y.value?(u(),R(p,{key:1,type:"success",size:"small",onClick:ce},{default:s(()=>[...e[49]||(e[49]=[o(" 开启自动刷新 ",-1)])]),_:1})):x("",!0)])]),M.value.length>0?(u(),_("div",Fa,[lt((u(),R(bt,{data:M.value,style:{width:"100%"},size:"small","element-loading-text":"加载记录中...",stripe:""},{default:s(()=>[a(S,{prop:"batch_id",label:"批次ID",width:"80",align:"center"},{default:s(l=>[a(F,{size:"small",type:ss(Rt(l.row.batch_id)),effect:"dark"},{default:s(()=>[o(c(Rt(l.row.batch_id)),1)]),_:2},1032,["type"])]),_:1}),a(S,{prop:"title",label:"种子标题","min-width":"250",align:"center","show-overflow-tooltip":""}),a(S,{prop:"source_site",label:"源站点",width:"80",align:"center"}),a(S,{prop:"target_site",label:"目标站点",width:"80",align:"center"}),a(S,{prop:"video_size_gb",label:"视频大小",width:"80",align:"center"},{default:s(l=>[l.row.video_size_gb?(u(),_("span",Pa,c(l.row.video_size_gb)+"GB",1)):(u(),_("span",Ma,"-"))]),_:1}),a(S,{prop:"status",label:"状态",width:"80",align:"center"},{default:s(l=>[a(F,{type:Kt(l.row.status),size:"small"},{default:s(()=>[o(c(Gt(l.row.status)),1)]),_:2},1032,["type"])]),_:1}),a(S,{prop:"progress",label:"进度",width:"100",align:"center"},{default:s(l=>[l.row.progress?(u(),_("div",Na,[a(kt,{percentage:Ft(l.row.progress),color:rs(Ft(l.row.progress)),"stroke-width":8,"show-text":!1,class:"progress-bar"},null,8,["percentage","color"]),r("span",Aa,c(l.row.progress),1)])):(u(),_("span",Oa,"-"))]),_:1}),a(S,{prop:"error_detail",label:"详情",width:"110",align:"center","show-overflow-tooltip":""},{default:s(l=>[l.row.status==="success"&&l.row.success_url?(u(),_("span",La,[a(ds,{type:"primary",href:ns(l.row.success_url),target:"_blank"},{default:s(()=>[...e[51]||(e[51]=[o("查看详情页",-1)])]),_:1},8,["href"])])):l.row.error_detail?(u(),_("span",Ea,c(l.row.error_detail),1)):(u(),_("span",Ua,"-"))]),_:1}),a(S,{prop:"downloader_add_result",label:"下载器状态",width:"150",align:"center"},{default:s(l=>[l.row.downloader_add_result?(u(),_(Ie,{key:0},[as(l.row.downloader_add_result)==="danger"?(u(),R(us,{key:0,effect:"dark",placement:"top"},{content:s(()=>[o(c(Vt(l.row.downloader_add_result)),1)]),default:s(()=>[e[52]||(e[52]=r("span",{style:{color:"#f56c6c"}},"错误",-1))]),_:2},1024)):(u(),_("span",{key:1,style:_s([{"text-align":"center"},{color:ls(l.row.downloader_add_result)}])},c(Vt(l.row.downloader_add_result)),5))],64)):(u(),_("span",Ja,"-"))]),_:1}),a(S,{prop:"processed_at",label:"处理时间",width:"100",align:"center"},{default:s(l=>[r("div",qa,c(os(l.row.processed_at)),1)]),_:1})]),_:1},8,["data"])),[[Nt,ie.value]])])):x("",!0),M.value.length===0&&!ie.value?(u(),_("div",Xa,[a(Pt,{description:"暂无批量转种记录"})])):x("",!0)]),_:1}),a(Mt,{label:"BDInfo获取记录",name:"bdinfo"},{label:s(()=>[...e[53]||(e[53]=[r("span",null,"BDInfo获取记录",-1)])]),default:s(()=>[r("div",ja,[r("div",Ha,[a(I,{modelValue:Ce.value,"onUpdate:modelValue":e[10]||(e[10]=l=>Ce.value=l),onChange:Qt,size:"small"},{default:s(()=>[a(z,{label:""},{default:s(()=>[...e[54]||(e[54]=[o("全部",-1)])]),_:1}),a(z,{label:"processing"},{default:s(()=>[...e[55]||(e[55]=[o("处理中",-1)])]),_:1}),a(z,{label:"completed"},{default:s(()=>[...e[56]||(e[56]=[o("已完成",-1)])]),_:1}),a(z,{label:"failed"},{default:s(()=>[...e[57]||(e[57]=[o("失败",-1)])]),_:1})]),_:1},8,["modelValue"])]),r("div",Wa,[a(p,{type:"primary",size:"small",onClick:Ae},{default:s(()=>[...e[58]||(e[58]=[o(" 刷新 ",-1)])]),_:1}),B.value?(u(),R(p,{key:0,type:"warning",size:"small",onClick:ze},{default:s(()=>[...e[59]||(e[59]=[o(" 停止自动刷新 ",-1)])]),_:1})):G.value?(u(),R(p,{key:1,type:"success",size:"small",onClick:tt},{default:s(()=>[...e[60]||(e[60]=[o(" 开启自动刷新 ",-1)])]),_:1})):x("",!0)])]),le.value.length>0?(u(),_("div",Ka,[a(bt,{data:le.value,style:{width:"100%"},size:"small",stripe:""},{default:s(()=>[a(S,{prop:"title",label:"种子标题","show-overflow-tooltip":""}),a(S,{prop:"nickname",label:"站点",width:"100",align:"center"},{default:s(l=>[r("div",Ga,c(l.row.nickname),1)]),_:1}),a(S,{prop:"seed_id",label:"种子ID",width:"60",align:"center"},{default:s(l=>[r("span",null,c(l.row.seed_id.split("_")[1]),1)]),_:1}),a(S,{prop:"mediainfo_status",label:"状态",width:"80",align:"center"},{default:s(l=>[a(F,{type:$t(l.row.mediainfo_status),size:"small"},{default:s(()=>[o(c(zt(l.row.mediainfo_status)),1)]),_:2},1032,["type"])]),_:1}),a(S,{prop:"bdinfo_started_at",label:"开始时间",width:"140",align:"center"},{default:s(l=>[l.row.bdinfo_started_at?(u(),_("span",Qa,c(Ve(l.row.bdinfo_started_at)),1)):(u(),_("span",Ya,"-"))]),_:1}),a(S,{prop:"duration",label:"耗时",width:"80",align:"center"},{default:s(l=>[l.row.mediainfo_status==="processing_bdinfo"&&l.row.progress_info?(u(),_("span",Za,c(l.row.progress_info.elapsed_time),1)):(u(),_("span",el,c(Tt(l.row)),1))]),_:1}),a(S,{label:"剩余时间",width:"100",align:"center"},{default:s(l=>[l.row.mediainfo_status==="processing_bdinfo"&&l.row.progress_info&&l.row.progress_info.remaining_time?(u(),_("span",tl,c(l.row.progress_info.remaining_time),1)):(u(),_("span",sl,"-"))]),_:1}),a(S,{label:"进度",width:"100",align:"center"},{default:s(l=>[l.row.mediainfo_status==="processing_bdinfo"&&l.row.progress_info?(u(),_("div",al,[a(kt,{percentage:l.row.progress_info.progress_percent||0,status:l.row.progress_info.progress_percent===100?"success":"","stroke-width":6,"show-text":!1},null,8,["percentage","status"]),r("div",ll,c(l.row.progress_info.progress_percent||0)+"% ",1)])):l.row.mediainfo_status==="completed"?(u(),_("div",nl,[a(kt,{percentage:100,status:"success","stroke-width":6,"show-text":!1}),e[61]||(e[61]=r("div",{style:{"font-size":"12px","margin-top":"4px",color:"#606266"}},"100%",-1))])):(u(),_("span",ol,"-"))]),_:1}),a(S,{label:"操作",width:"80",align:"center"},{default:s(l=>[a(p,{size:"small",type:"primary",onClick:Le=>Yt(l.row)},{default:s(()=>[...e[62]||(e[62]=[o(" 详情 ",-1)])]),_:1},8,["onClick"]),es(l.row)?(u(),R(p,{key:0,size:"small",type:"warning",onClick:Le=>ts(l.row),style:{"margin-left":"0"},loading:Be.value.has(l.row.seed_id)},{default:s(()=>[...e[63]||(e[63]=[o(" 重试 ",-1)])]),_:1},8,["onClick","loading"])):x("",!0)]),_:1})]),_:1},8,["data"])])):x("",!0),le.value.length===0&&!Ue.value?(u(),_("div",rl,[a(Pt,{description:"暂无BDInfo获取记录"})])):x("",!0)]),_:1})]),_:1},8,["modelValue"])]),r("div",il,[ae.value==="cross-seed"?(u(),R(p,{key:0,onClick:Wt,type:"warning"},{default:s(()=>[...e[64]||(e[64]=[o("清空记录",-1)])]),_:1})):x("",!0),a(p,{onClick:Dt},{default:s(()=>[...e[65]||(e[65]=[o("关闭",-1)])]),_:1})])]),_:1})])):x("",!0),W.value?(u(),_("div",dl,[a(Oe,{class:"bdinfo-detail-card",shadow:"always"},{header:s(()=>[r("div",ul,[r("span",null,"BDInfo详情 - "+c(C.value?.title),1),a(p,{type:"danger",circle:"",onClick:Bt,plain:""},{default:s(()=>[...e[66]||(e[66]=[o("X",-1)])]),_:1})])]),default:s(()=>[r("div",cl,[a(fs,{column:2,border:""},{default:s(()=>[a(ke,{label:"种子标题"},{default:s(()=>[o(c(C.value?.title),1)]),_:1}),a(ke,{label:"站点"},{default:s(()=>[o(c(C.value?.nickname),1)]),_:1}),a(ke,{label:"状态"},{default:s(()=>[a(F,{type:$t(C.value?.mediainfo_status),size:"small"},{default:s(()=>[o(c(zt(C.value?.mediainfo_status)),1)]),_:1},8,["type"])]),_:1}),a(ke,{label:"任务ID"},{default:s(()=>[C.value?.bdinfo_task_id?(u(),_("div",pl,[r("span",null,c(C.value.bdinfo_task_id),1),a(p,{type:"text",size:"small",onClick:e[12]||(e[12]=l=>It(C.value.bdinfo_task_id)),style:{"margin-left":"5px",padding:"0"}},{default:s(()=>[a(ps,null,{default:s(()=>[a(Ut(vs))]),_:1})]),_:1})])):(u(),_("span",fl,"-"))]),_:1}),a(ke,{label:"开始时间"},{default:s(()=>[o(c(C.value?.bdinfo_started_at?Ve(C.value.bdinfo_started_at):"-"),1)]),_:1}),a(ke,{label:"完成时间"},{default:s(()=>[o(c(C.value?.bdinfo_completed_at?Ve(C.value.bdinfo_completed_at):"-"),1)]),_:1}),a(ke,{label:"耗时"},{default:s(()=>[o(c(Tt(C.value)),1)]),_:1}),a(ke,{label:"是否为BDInfo"},{default:s(()=>[a(F,{type:C.value?.is_bdinfo?"success":"info",size:"small"},{default:s(()=>[o(c(C.value?.is_bdinfo?"是":"否"),1)]),_:1},8,["type"])]),_:1})]),_:1}),C.value?.bdinfo_error?(u(),_("div",gl,[e[67]||(e[67]=r("h4",{style:{margin:"15px 0 10px 0",color:"#f56c6c"}},"错误信息",-1)),a(d,{title:C.value.bdinfo_error,type:"error",closable:!1,"show-icon":""},null,8,["title"])])):x("",!0),C.value?.mediainfo?(u(),_("div",_l,[r("h4",vl,c(C.value?.is_bdinfo?"BDInfo":"MediaInfo")+" 内容 ",1),a(f,{type:"textarea","model-value":C.value.mediainfo,rows:15,class:"code-font",readonly:""},null,8,["model-value"]),r("div",ml,[a(p,{type:"primary",size:"small",onClick:e[13]||(e[13]=l=>It(C.value.mediainfo))},{default:s(()=>[...e[68]||(e[68]=[o(" 复制内容 ",-1)])]),_:1})])])):x("",!0)]),r("div",hl,[a(p,{onClick:Bt},{default:s(()=>[...e[69]||(e[69]=[o("关闭",-1)])]),_:1})])]),_:1})])):x("",!0),xe.value?(u(),_("div",yl,[a(Oe,{class:"batch-fetch-main-card",shadow:"always"},{header:s(()=>[r("div",wl,[e[71]||(e[71]=r("span",null,"批量获取种子数据",-1)),a(p,{type:"danger",circle:"",onClick:He,plain:""},{default:s(()=>[...e[70]||(e[70]=[o("X",-1)])]),_:1})])]),default:s(()=>[r("div",bl,[a(Ys,{onCancel:He,onFetchCompleted:yt})])]),_:1})])):x("",!0)])}}}),$l=Xt(xl,[["__scopeId","data-v-e5ebe43f"]]);export{$l as default};
