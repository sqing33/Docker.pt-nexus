import{d as Re,r as c,C as K,o as Ee,a as k,i as l,e as s,n as _e,m as q,k as H,w as t,f as w,F as Q,g as h,z as p,x as i,Z as ge,j as d,O as fe,$ as ve,a0 as te,a1 as le,S as L,I as W,a2 as Fe,a3 as Le,t as P,u as me,v as Ye,l as ae,T as Ge,a4 as $e,a5 as je,a6 as Be,h as f,B as Oe,q as De,p as Ke}from"./index-BpGjWZu3.js";const He={class:"settings-container"},Qe={class:"settings-grid"},We={class:"card-header"},Ze={class:"header-content"},Je={class:"card-content"},Xe={class:"password-hint"},es={class:"settings-card glass-card glass-rounded glass-transparent-header glass-transparent-body"},ss={class:"card-header"},ts={class:"header-content"},ls={class:"card-content"},as={class:"settings-card glass-card glass-rounded glass-transparent-header glass-transparent-body"},os={class:"card-header"},ns={class:"header-content"},rs={class:"card-content"},ds={style:{display:"flex","align-items":"center",gap:"15px"}},is={style:{flex:"1",display:"flex","flex-direction":"column","justify-content":"center"}},us={style:{display:"flex",margin:"auto","align-items":"center",gap:"20px","justify-content":"center",padding:"15px 0"}},ps={style:{display:"flex",margin:"auto",gap:"20px","justify-content":"center",padding:"15px 0"}},cs={style:{height:"500px","overflow-y":"auto"}},_s={key:0,style:{"text-align":"center",padding:"20px",color:"#999"}},gs={key:1},fs={style:{color:"#999","margin-right":"10px"}},vs={style:{"margin-left":"10px"}},ms={style:{"text-align":"right"}},ys={class:"settings-card glass-card glass-rounded glass-transparent-header glass-transparent-body"},hs={class:"card-header"},ks={class:"header-content"},ws={class:"card-content"},bs={key:"agsv",class:"credential-section"},xs={class:"credential-header"},Vs={class:"credential-form"},Cs={key:"other",class:"placeholder-section"},Us={class:"settings-card glass-card glass-rounded glass-transparent-header glass-transparent-body"},zs={class:"card-header"},Is={class:"header-content"},Ss={class:"card-content"},Ps={class:"settings-card glass-card glass-rounded glass-transparent-header glass-transparent-body"},Ts={class:"card-header"},qs={class:"header-content"},As={class:"card-content"},Ns={style:{display:"flex","align-items":"center",gap:"20px",padding:"15px 0"}},Ms={class:"form-item",style:{"margin-bottom":"16px"}},Rs={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"6px"}},Es={class:"settings-card glass-card glass-rounded glass-transparent-header glass-transparent-body"},Fs={class:"card-header"},Ls={class:"header-content"},Ys={class:"card-content placeholder-content"},Gs={style:{"min-height":"300px"}},$s={key:0,style:{"text-align":"center",padding:"40px",color:"var(--el-text-color-secondary)"}},js={key:1},Bs={style:{"margin-bottom":"16px",display:"flex","justify-content":"space-between","align-items":"center"}},Os={style:{color:"var(--el-text-color-regular)"}},Ds={class:"path-tree-container"},Ks={style:{"text-align":"right"}},Hs=Re({__name:"GeneralSettings",setup(Qs){const Y=c(!1),G=c(!1),oe=c("admin"),$=c(!1),_=c({old_password:"",username:"",password:""}),r=K({token:"",query_interval_hours:72,query_interval_days:3,auto_query_enabled:!0,path_filter_enabled:!1,selected_paths:[]}),C=c([]),A=c(!1),N=c(!1),M=c([]),V=c(),R=c([]),j=c(!1),g=K({image_hoster:"pixhost",agsv_email:"",agsv_password:"",default_downloader:""}),ye=[{value:"pixhost",label:"Pixhost (免费)"},{value:"agsv",label:"末日图床 (需账号)"}],ne=c([]),b=c(""),I=c(!1),S=c(""),he=()=>{I.value=!I.value,I.value?S.value=b.value:S.value=b.value?"*".repeat(b.value.length):""},ke=a=>{a.length>0&&a.split("").every(o=>o==="*")||(b.value=a,r.token=a)},B=c(!1),E=c([]),Z=c(!1),J=c(!1),T=K({background_url:""}),X=c(!1),U=K({anonymous_upload:!0,cspt_ptgen_token:""}),we=()=>{window.open("https://cspt.top/ptgen.php","_blank")},be=async()=>{try{const a=await h.get("/api/auth/status");a.data?.success&&(oe.value=a.data.username||"admin",$.value=!!a.data.must_change_password,_.value.username=oe.value);const o=(await h.get("/api/settings")).data;if(o.iyuu_token){b.value=o.iyuu_token;const u="*".repeat(o.iyuu_token.length);r.token=u,S.value=u}else b.value="",r.token="",S.value="";o.iyuu_settings&&(r.query_interval_hours=o.iyuu_settings.query_interval_hours||72,r.query_interval_days=Math.ceil(r.query_interval_hours/24),r.auto_query_enabled=o.iyuu_settings.auto_query_enabled!==!1,r.path_filter_enabled=o.iyuu_settings.path_filter_enabled||!1,r.selected_paths=o.iyuu_settings.selected_paths||[]),Object.assign(g,o.cross_seed||{}),o.ui_settings&&o.ui_settings.background_url&&(T.background_url=o.ui_settings.background_url),o.upload_settings&&(U.anonymous_upload=o.upload_settings.anonymous_upload!==!1),o.cross_seed&&o.cross_seed.cspt_ptgen_token&&(U.cspt_ptgen_token=o.cross_seed.cspt_ptgen_token);const m=await h.get("/api/downloaders_list");ne.value=m.data,r.path_filter_enabled&&await F()}catch{p.error("无法加载设置。")}},xe=a=>{const e=[],o=new Map;return a.sort().forEach(m=>{const u=m.replace(/^\/|\/$/g,"").split("/");let y="",v=e;u.forEach((x,z)=>{if(y=z===0?`/${x}`:`${y}/${x}`,!o.has(y)){const D={path:z===u.length-1?m:y,label:x,children:[]};o.set(y,D),v.push(D)}v=o.get(y).children})}),o.forEach(m=>{m.children&&m.children.length===0&&delete m.children}),e},F=async()=>{A.value=!0;try{const a=await h.get("/api/paths");a.data.success?(C.value=a.data.paths||[],R.value=xe(C.value)):(p.error(a.data.error||"获取路径列表失败"),C.value=[],R.value=[])}catch(a){const e=a.response?.data?.error||"获取路径列表失败";p.error(e),C.value=[],R.value=[]}finally{A.value=!1}},re=async()=>{if(!G.value){G.value=!0;try{const a={query_interval_hours:r.query_interval_days*24,auto_query_enabled:r.auto_query_enabled,path_filter_enabled:r.path_filter_enabled,selected_paths:r.selected_paths};if(await h.post("/api/iyuu/settings",a),r.query_interval_hours=a.query_interval_hours,b.value&&r.token!=="********"){const e={iyuu_token:b.value};await h.post("/api/settings",e),I.value=!1;const o=b.value?"*".repeat(b.value.length):"";S.value=o,r.token=o}else if(!b.value&&r.token){const e={iyuu_token:r.token};await h.post("/api/settings",e),b.value=r.token}p.success("IYUU 设置已保存！")}catch(a){const e=a.response?.data?.error||"保存失败。";p.error(e)}finally{G.value=!1}}},Ve=async()=>{try{p.success("IYUU 查询已触发，请稍后查看结果。"),h.post("/api/iyuu/trigger_query").catch(a=>{console.error("IYUU 查询后台执行失败:",a)})}catch(a){const e=a.response?.data?.message||"触发查询失败。";p.error(e)}},de=async()=>{Z.value=!0,B.value=!0;try{const a=await h.get("/api/iyuu/logs");a.data.success?E.value=a.data.logs||[]:(p.error(a.data.message||"获取日志失败"),E.value=[])}catch(a){const e=a.response?.data?.message||"获取日志失败";p.error(e),E.value=[]}finally{Z.value=!1}},Ce=async()=>{if(!Y.value){if(!_.value.old_password){p.warning("请填写当前密码");return}if(!_.value.username&&!_.value.password){p.warning("请输入新用户名或新密码");return}if(_.value.username&&_.value.username.trim().length<3){p.warning("用户名至少 3 个字符");return}if(_.value.password&&_.value.password.length<6){p.warning("密码至少 6 位");return}Y.value=!0;try{const a={old_password:_.value.old_password};_.value.username&&(a.username=_.value.username),_.value.password&&(a.password=_.value.password);const e=await h.post("/api/auth/change_password",a);e.data?.success?(p.success("保存成功，请重新登录"),localStorage.removeItem("token"),window.location.href="/login"):p.error(e.data?.message||"保存失败")}catch(a){p.error(a?.response?.data?.message||"保存失败")}finally{Y.value=!1}}},ie=async()=>{j.value=!0;try{const a={image_hoster:g.image_hoster,agsv_email:g.agsv_email,agsv_password:g.agsv_password,default_downloader:g.default_downloader};await h.post("/api/settings/cross_seed",a),p.success("转种设置已保存！")}catch(a){const e=a.response?.data?.error||"保存失败。";p.error(e)}finally{j.value=!1}},Ue=async()=>{J.value=!0;try{const a={ui_settings:{background_url:T.background_url}};await h.post("/api/settings",a),p.success("背景设置已保存！"),window.dispatchEvent(new CustomEvent("background-updated",{detail:{backgroundUrl:T.background_url}}))}catch(a){const e=a.response?.data?.error||"保存失败。";p.error(e)}finally{J.value=!1}},ze=async()=>{X.value=!0;try{const a={anonymous_upload:U.anonymous_upload};await h.post("/api/upload_settings",a);const e={image_hoster:g.image_hoster,agsv_email:g.agsv_email,agsv_password:g.agsv_password,default_downloader:g.default_downloader,cspt_ptgen_token:U.cspt_ptgen_token};await h.post("/api/settings/cross_seed",e),p.success("上传设置已保存！")}catch(a){const e=a.response?.data?.error||"保存失败。";p.error(e)}finally{X.value=!1}},Ie=async a=>{a&&C.value.length===0&&await F()},ee=()=>V.value?V.value.getCheckedNodes().filter(e=>!e.children||e.children.length===0).map(e=>e.path):[],Se=()=>{M.value=ee()},Pe=async()=>{C.value.length===0&&await F(),N.value=!0,await De(),V.value&&(V.value.setCheckedKeys([]),V.value.setCheckedKeys(r.selected_paths))},Te=()=>{if(V.value){const a=[],e=o=>{o.forEach(m=>{!m.children||m.children.length===0?a.push(m.path):e(m.children)})};e(R.value),V.value.setCheckedKeys(a),M.value=a}},qe=()=>{V.value&&(V.value.setCheckedKeys([]),M.value=[])},Ae=()=>{r.selected_paths=ee(),N.value=!1,p.success(`已选择 ${r.selected_paths.length} 个路径`),re()};return Ee(()=>{be()}),(a,e)=>{const o=w("el-icon"),m=w("el-tag"),u=w("el-button"),y=w("el-input"),v=w("el-form-item"),x=w("el-text"),z=w("el-form"),O=w("el-switch"),D=w("el-input-number"),ue=w("el-dialog"),se=w("el-option"),pe=w("el-select"),Ne=w("el-tree"),ce=Ye("loading");return f(),k(Q,null,[l("div",He,[l("div",Qe,[l("div",{class:_e(["settings-card glass-card glass-rounded glass-transparent-header glass-transparent-body",{"temp-password-highlight":$.value}])},[l("div",We,[l("div",Ze,[s(o,{class:"header-icon"},{default:t(()=>[s(i(ge))]),_:1}),e[19]||(e[19]=l("h3",null,"账户信息",-1)),$.value?(f(),q(m,{key:0,type:"danger",size:"small",effect:"dark"},{default:t(()=>[s(o,{style:{"vertical-align":"middle","margin-right":"4px"}},{default:t(()=>[s(i(fe))]),_:1}),e[18]||(e[18]=d(" 临时密码-请立即修改 ",-1))]),_:1})):H("",!0)]),s(u,{type:"primary",loading:Y.value,onClick:Ce,size:"small"},{default:t(()=>[...e[20]||(e[20]=[d(" 保存 ",-1)])]),_:1},8,["loading"])]),l("div",Je,[s(z,{model:_.value,"label-position":"top",class:"settings-form"},{default:t(()=>[s(v,{label:"用户名",class:"form-item"},{default:t(()=>[s(y,{modelValue:_.value.username,"onUpdate:modelValue":e[0]||(e[0]=n=>_.value.username=n),placeholder:"请输入用户名",clearable:""},{prefix:t(()=>[s(o,null,{default:t(()=>[s(i(ge))]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(v,{label:"当前密码",required:"",class:"form-item"},{default:t(()=>[s(y,{modelValue:_.value.old_password,"onUpdate:modelValue":e[1]||(e[1]=n=>_.value.old_password=n),type:"password",placeholder:"请输入当前密码","show-password":""},{prefix:t(()=>[s(o,null,{default:t(()=>[s(i(ve))]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(v,{label:"新密码",class:"form-item"},{default:t(()=>[s(y,{modelValue:_.value.password,"onUpdate:modelValue":e[2]||(e[2]=n=>_.value.password=n),type:"password",placeholder:"至少 6 位","show-password":""},{prefix:t(()=>[s(o,null,{default:t(()=>[s(i(te))]),_:1})]),_:1},8,["modelValue"]),l("div",Xe,[s(x,{type:"info",size:"small"},{default:t(()=>[...e[21]||(e[21]=[d("留空表示不修改密码",-1)])]),_:1})])]),_:1}),e[23]||(e[23]=l("div",{class:"form-spacer"},null,-1)),$.value?(f(),q(x,{key:0,type:"warning",size:"small",class:"security-hint"},{default:t(()=>[s(o,{size:"12"},{default:t(()=>[s(i(fe))]),_:1}),e[22]||(e[22]=d(" 为确保安全，请立即设置新用户名与密码 ",-1))]),_:1})):H("",!0)]),_:1},8,["model"])])],2),l("div",es,[l("div",ss,[l("div",ts,[s(o,{class:"header-icon"},{default:t(()=>[s(i(le))]),_:1}),e[24]||(e[24]=l("h3",null,"背景设置",-1))]),s(u,{type:"primary",loading:J.value,onClick:Ue,size:"small"},{default:t(()=>[...e[25]||(e[25]=[d(" 保存 ",-1)])]),_:1},8,["loading"])]),l("div",ls,[s(z,{model:T,"label-position":"top",class:"settings-form"},{default:t(()=>[s(v,{label:"背景图片URL",class:"form-item"},{default:t(()=>[s(y,{modelValue:T.background_url,"onUpdate:modelValue":e[3]||(e[3]=n=>T.background_url=n),placeholder:"请输入背景图片的URL地址",clearable:""},{prefix:t(()=>[s(o,null,{default:t(()=>[s(i(le))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e[27]||(e[27]=l("div",{class:"form-spacer"},null,-1)),s(x,{type:"info",size:"small",class:"proxy-hint"},{default:t(()=>[s(o,{size:"12"},{default:t(()=>[s(i(L))]),_:1}),e[26]||(e[26]=d(" 设置应用程序的背景图片，支持在线图片URL ",-1))]),_:1})]),_:1},8,["model"])])]),l("div",as,[l("div",os,[l("div",ns,[s(o,{class:"header-icon"},{default:t(()=>[s(i(W))]),_:1}),e[28]||(e[28]=l("h3",null,"IYUU设置",-1))]),s(u,{type:"primary",loading:G.value,onClick:re,size:"small"},{default:t(()=>[...e[29]||(e[29]=[d(" 保存 ",-1)])]),_:1},8,["loading"])]),l("div",rs,[s(z,{model:r,"label-position":"top",class:"settings-form"},{default:t(()=>[s(v,{label:"IYUU Token",class:"form-item"},{default:t(()=>[s(y,{modelValue:S.value,"onUpdate:modelValue":e[4]||(e[4]=n=>S.value=n),type:I.value?"text":"password",placeholder:"请输入IYUU Token",onInput:ke},{prefix:t(()=>[s(o,null,{default:t(()=>[s(i(te))]),_:1})]),suffix:t(()=>[s(o,{onClick:he,style:{cursor:"pointer"},class:_e({"is-active":I.value})},{default:t(()=>[I.value?(f(),q(i(Le),{key:1})):(f(),q(i(Fe),{key:0}))]),_:1},8,["class"])]),_:1},8,["modelValue","type"])]),_:1}),s(v,{label:"查询路径限制",class:"form-item"},{default:t(()=>[l("div",ds,[s(O,{modelValue:r.path_filter_enabled,"onUpdate:modelValue":e[5]||(e[5]=n=>r.path_filter_enabled=n),"active-text":"启用路径过滤","inactive-text":"禁用路径过滤",onChange:Ie},null,8,["modelValue"]),r.path_filter_enabled?(f(),q(u,{key:0,type:"primary",size:"small",onClick:Pe},{default:t(()=>[d(" 选择路径 ("+P(r.selected_paths.length)+") ",1)]),_:1})):H("",!0)])]),_:1}),l("div",is,[s(v,{label:"自动查询与间隔",class:"form-item"},{default:t(()=>[l("div",us,[s(O,{modelValue:r.auto_query_enabled,"onUpdate:modelValue":e[6]||(e[6]=n=>r.auto_query_enabled=n),"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"]),s(D,{modelValue:r.query_interval_days,"onUpdate:modelValue":e[7]||(e[7]=n=>r.query_interval_days=n),min:1,placeholder:"天数","controls-position":"right",style:{width:"120px"}},null,8,["modelValue"]),e[30]||(e[30]=l("span",null,"天",-1))])]),_:1}),s(v,{label:"",class:"form-item"},{default:t(()=>[l("div",ps,[s(u,{type:"success",onClick:Ve,size:"default",style:{"font-size":"14px",padding:"12px 24px"}},{default:t(()=>[...e[31]||(e[31]=[d(" 手动触发查询 ",-1)])]),_:1}),s(u,{type:"primary",onClick:de,size:"default",style:{"font-size":"14px",padding:"12px 24px"}},{default:t(()=>[...e[32]||(e[32]=[d(" 查看日志 ",-1)])]),_:1})])]),_:1}),s(x,{type:"info",size:"small",style:{display:"block","text-align":"center",margin:"10px 0"}},{default:t(()=>[s(o,{size:"12"},{default:t(()=>[s(i(L))]),_:1}),e[33]||(e[33]=d(" 种子查询页面的红色表示可辅种但未在做种 ",-1))]),_:1})]),e[35]||(e[35]=l("div",{class:"form-spacer"},null,-1)),s(x,{type:"info",size:"small",class:"proxy-hint"},{default:t(()=>[s(o,{size:"12"},{default:t(()=>[s(i(L))]),_:1}),e[34]||(e[34]=d(" 用于与IYUU平台进行数据同步和通信的身份验证令牌 ",-1))]),_:1})]),_:1},8,["model"])])]),s(ue,{modelValue:B.value,"onUpdate:modelValue":e[9]||(e[9]=n=>B.value=n),title:"IYUU 查询日志",width:"800px",top:"50px"},{footer:t(()=>[l("div",ms,[s(u,{onClick:e[8]||(e[8]=n=>B.value=!1)},{default:t(()=>[...e[36]||(e[36]=[d("关闭",-1)])]),_:1}),s(u,{type:"primary",onClick:de},{default:t(()=>[...e[37]||(e[37]=[d("刷新",-1)])]),_:1})])]),default:t(()=>[me((f(),k("div",cs,[E.value.length===0?(f(),k("div",_s," 暂无日志记录 ")):(f(),k("div",gs,[(f(!0),k(Q,null,ae(E.value,(n,Me)=>(f(),k("div",{key:Me,style:{padding:"8px 0","border-bottom":"1px solid #eee","font-size":"12px"}},[l("span",fs,"["+P(n.timestamp)+"]",1),l("span",{style:Oe({color:n.level==="ERROR"?"#F56C6C":n.level==="WARNING"?"#E6A23C":n.level==="INFO"?"#409EFF":"#67C23A"})},"["+P(n.level)+"]",5),l("span",vs,P(n.message),1)]))),128))]))])),[[ce,Z.value]])]),_:1},8,["modelValue"]),l("div",ys,[l("div",hs,[l("div",ks,[s(o,{class:"header-icon"},{default:t(()=>[s(i(le))]),_:1}),e[38]||(e[38]=l("h3",null,"图床设置",-1))]),s(u,{type:"primary",onClick:ie,loading:j.value,size:"small"},{default:t(()=>[...e[39]||(e[39]=[d(" 保存 ",-1)])]),_:1},8,["loading"])]),l("div",ws,[s(z,{model:g,"label-position":"top",class:"settings-form"},{default:t(()=>[s(v,{label:"截图图床",class:"form-item"},{default:t(()=>[s(pe,{modelValue:g.image_hoster,"onUpdate:modelValue":e[10]||(e[10]=n=>g.image_hoster=n),placeholder:"请选择图床服务"},{default:t(()=>[(f(),k(Q,null,ae(ye,n=>s(se,{key:n.value,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),s(Ge,{name:"slide",mode:"out-in"},{default:t(()=>[g.image_hoster==="agsv"?(f(),k("div",bs,[l("div",xs,[s(o,{class:"credential-icon"},{default:t(()=>[s(i(ve))]),_:1}),e[40]||(e[40]=l("span",{class:"credential-title"},"末日图床账号凭据",-1))]),l("div",Vs,[s(v,{label:"邮箱",class:"form-item compact"},{default:t(()=>[s(y,{modelValue:g.agsv_email,"onUpdate:modelValue":e[11]||(e[11]=n=>g.agsv_email=n),placeholder:"请输入邮箱",size:"small"},null,8,["modelValue"])]),_:1}),s(v,{label:"密码",class:"form-item compact"},{default:t(()=>[s(y,{modelValue:g.agsv_password,"onUpdate:modelValue":e[12]||(e[12]=n=>g.agsv_password=n),type:"password",placeholder:"请输入密码","show-password":"",size:"small"},null,8,["modelValue"])]),_:1})])])):(f(),k("div",Cs,[s(x,{type:"info",size:"small"},{default:t(()=>[...e[41]||(e[41]=[d("当前图床无需额外配置，但是需要代理才能上传",-1)])]),_:1})]))]),_:1})]),_:1},8,["model"])])]),l("div",Us,[l("div",zs,[l("div",Is,[s(o,{class:"header-icon"},{default:t(()=>[s(i($e))]),_:1}),e[42]||(e[42]=l("h3",null,"默认下载器设置",-1))]),s(u,{type:"primary",onClick:ie,loading:j.value,size:"small"},{default:t(()=>[...e[43]||(e[43]=[d(" 保存 ",-1)])]),_:1},8,["loading"])]),l("div",Ss,[s(z,{model:g,"label-position":"top",class:"settings-form"},{default:t(()=>[s(v,{label:"默认下载器",class:"form-item"},{default:t(()=>[s(pe,{modelValue:g.default_downloader,"onUpdate:modelValue":e[13]||(e[13]=n=>g.default_downloader=n),placeholder:"请选择默认下载器",clearable:""},{default:t(()=>[s(se,{label:"使用源种子所在的下载器",value:""}),(f(!0),k(Q,null,ae(ne.value,n=>(f(),q(se,{key:n.id,label:n.name,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e[45]||(e[45]=l("div",{class:"form-spacer"},null,-1)),s(x,{type:"info",size:"small",class:"proxy-hint"},{default:t(()=>[s(o,{size:"12"},{default:t(()=>[s(i(L))]),_:1}),e[44]||(e[44]=d(' 转种完成后自动将种子添加到指定的下载器。选择"使用源种子所在的下载器"或不选择任何下载器，则添加到源种子所在的下载器。 ',-1))]),_:1})]),_:1},8,["model"])])]),l("div",Ps,[l("div",Ts,[l("div",qs,[s(o,{class:"header-icon"},{default:t(()=>[s(i(W))]),_:1}),e[46]||(e[46]=l("h3",null,"转种设置",-1))]),s(u,{type:"primary",onClick:ze,loading:X.value,size:"small"},{default:t(()=>[...e[47]||(e[47]=[d(" 保存 ",-1)])]),_:1},8,["loading"])]),l("div",As,[s(z,{model:U,"label-position":"top",class:"settings-form"},{default:t(()=>[s(v,{label:"",class:"form-item"},{default:t(()=>[l("div",Ns,[s(O,{modelValue:U.anonymous_upload,"onUpdate:modelValue":e[14]||(e[14]=n=>U.anonymous_upload=n),"active-text":"启用匿名","inactive-text":"禁用匿名",size:"large"},null,8,["modelValue"])])]),_:1}),l("div",Ms,[l("div",Rs,[e[49]||(e[49]=l("span",{style:{"font-weight":"500",color:"var(--el-text-color-regular)","font-size":"13px"}}," 财神 PTGen API Token（每日100次） ",-1)),s(u,{type:"primary",link:"",onClick:we,style:{"white-space":"nowrap"}},{default:t(()=>[s(o,{style:{"margin-right":"4px"}},{default:t(()=>[s(i(je))]),_:1}),e[48]||(e[48]=d(" 获取Token ",-1))]),_:1})]),s(y,{modelValue:U.cspt_ptgen_token,"onUpdate:modelValue":e[15]||(e[15]=n=>U.cspt_ptgen_token=n),type:"password",placeholder:"请输入财神 PTGen API Token","show-password":""},{prefix:t(()=>[s(o,null,{default:t(()=>[s(i(te))]),_:1})]),_:1},8,["modelValue"])]),e[57]||(e[57]=l("div",{class:"form-spacer"},null,-1)),s(x,{type:"info",size:"small",class:"proxy-hint"},{default:t(()=>[s(o,{size:"12"},{default:t(()=>[s(i(L))]),_:1}),e[50]||(e[50]=d(" 启用后，发布种子时将使用匿名模式，不显示上传者信息",-1)),e[51]||(e[51]=l("br",null,null,-1)),e[52]||(e[52]=d(" 配置财神 PTGen API Token 后，优先使用该API获取影片信息",-1)),e[53]||(e[53]=l("br",null,null,-1)),e[54]||(e[54]=d(" 财神 PTGen API 每日限量 100次",-1)),e[55]||(e[55]=l("br",null,null,-1)),e[56]||(e[56]=d(" 使用完会自动切换内置的其他 PTGen API ",-1))]),_:1})]),_:1},8,["model"])])]),l("div",Es,[l("div",Fs,[l("div",Ls,[s(o,{class:"header-icon"},{default:t(()=>[s(i(W))]),_:1}),e[58]||(e[58]=l("h3",null,"功能扩展",-1))])]),l("div",Ys,[s(o,{class:"placeholder-icon"},{default:t(()=>[s(i(W))]),_:1}),e[59]||(e[59]=l("p",{class:"placeholder-text"},"功能扩展中",-1))])])])]),l("div",null,[l("div",null,[s(ue,{modelValue:N.value,"onUpdate:modelValue":e[17]||(e[17]=n=>N.value=n),title:"选择IYUU查询路径",width:"600px",top:"50px"},{footer:t(()=>[l("div",Ks,[s(u,{onClick:e[16]||(e[16]=n=>N.value=!1)},{default:t(()=>[...e[65]||(e[65]=[d("取消",-1)])]),_:1}),s(u,{type:"primary",onClick:Ae,disabled:M.value.length===0},{default:t(()=>[d(" 确定选择 ("+P(M.value.length)+") ",1)]),_:1},8,["disabled"])])]),default:t(()=>[me((f(),k("div",Gs,[!A.value&&C.value.length===0?(f(),k("div",$s,[s(o,{style:{"font-size":"48px","margin-bottom":"16px",opacity:"0.5"}},{default:t(()=>[s(i(Be))]),_:1}),e[61]||(e[61]=l("p",null,"暂无可用的保存路径",-1)),s(u,{type:"primary",onClick:F,style:{"margin-top":"16px"}},{default:t(()=>[...e[60]||(e[60]=[d(" 刷新路径列表 ",-1)])]),_:1})])):C.value.length>0?(f(),k("div",js,[l("div",Bs,[l("span",Os," 已选择 "+P(ee().length)+" / "+P(C.value.length)+" 个路径 ",1),l("div",null,[s(u,{size:"small",onClick:Te},{default:t(()=>[...e[62]||(e[62]=[d("全选",-1)])]),_:1}),s(u,{size:"small",onClick:qe},{default:t(()=>[...e[63]||(e[63]=[d("清空",-1)])]),_:1}),s(u,{size:"small",onClick:F,loading:A.value},{default:t(()=>[...e[64]||(e[64]=[d("刷新",-1)])]),_:1},8,["loading"])])]),l("div",Ds,[s(Ne,{ref_key:"pathTreeRef",ref:V,data:R.value,"show-checkbox":"","node-key":"path","default-expand-all":"","expand-on-click-node":!1,"check-on-click-node":"","check-strictly":!0,props:{class:"path-tree-node"},onCheck:Se},null,8,["data"])])])):H("",!0)])),[[ce,A.value]])]),_:1},8,["modelValue"])])])],64)}}}),Zs=Ke(Hs,[["__scopeId","data-v-ff3c58cc"]]);export{Zs as default};
