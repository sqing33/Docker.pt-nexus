import{d as H,r as y,c as m,o as L,a as n,b as T,e as d,w as c,f as _,g as k,E as w,h as o,_ as q,i as a,j as r,k as g,F as b,l as x,n as S,t as i,m as I,p as z}from"./index-C0CTkU-g.js";const P={class:"home-container"},A={class:"site-grid"},F={class:"site-content"},M={class:"site-name-container"},j={class:"site-name"},Q={class:"site-roles"},R={key:0,class:"role-tag role-both"},G={key:1,class:"role-tag role-source"},J={key:2,class:"role-tag role-target"},K={key:0,class:"empty-placeholder"},O={class:"downloader-grid"},U={class:"downloader-header"},W={class:"downloader-name"},X={key:0,class:"downloader-details"},Y={class:"detail-row"},Z={class:"detail-value"},$={class:"detail-row"},ss={class:"detail-value"},es={class:"detail-row"},as={class:"detail-value"},ts={class:"detail-row"},os={class:"detail-value"},ns={class:"detail-row"},ls={class:"detail-value"},is={key:1,class:"downloader-disabled"},rs={key:0,class:"empty-downloader-placeholder"},cs=H({__name:"HomeView",setup(ds){const u=y([]),p=y([]),N=m(()=>u.value.filter(s=>s.is_source)),B=m(()=>u.value.filter(s=>s.is_target)),v=m(()=>{const s=new Map;return N.value.forEach(e=>{s.set(e.name,{...e,is_source:!0,is_target:!1})}),B.value.forEach(e=>{if(s.has(e.name)){const l=s.get(e.name);s.set(e.name,{...l,...e,is_source:!0,is_target:!0,has_cookie:l.has_cookie||e.has_cookie})}else s.set(e.name,{...e,is_source:!1,is_target:!0})}),Array.from(s.values()).sort((e,l)=>e.is_source&&e.is_target?-1:l.is_source&&l.is_target?1:e.is_source&&!l.is_source?-1:!e.is_source&&l.is_source?1:0)}),C=s=>{let e=!1;return(s.is_source&&!s.is_target||!s.is_source&&s.is_target||s.is_source&&s.is_target)&&(e=s.has_cookie&&(s.name!=="杜比"&&s.name!=="HDtime"&&s.name!=="肉丝"||s.has_passkey)),{"site-configured":e,"site-unconfigured":!e}},V=async()=>{try{const s=await k.get("/api/sites/status");u.value=s.data}catch{w.error({title:"错误",message:"无法从服务器获取站点状态列表"})}},f=async()=>{try{const s=await k.get("/api/downloader_info");p.value=s.data}catch(s){console.error("获取下载器信息失败:",s),w.error({title:"错误",message:"无法从服务器获取下载器信息"})}};return L(()=>{V(),f(),setInterval(()=>{f()},3e4)}),(s,e)=>{const l=_("el-card"),h=_("el-tag"),D=_("el-col"),E=_("el-row");return o(),n("div",P,[e[7]||(e[7]=T('<div class="warning-banner" data-v-594c8710><div class="warning-content" data-v-594c8710><img src="'+q+'" alt="PT Nexus Logo" class="warning-icon" data-v-594c8710><div class="text-container" data-v-594c8710><div class="marquee-container" data-v-594c8710><div class="marquee-content" data-v-594c8710><span class="warning-text" data-v-594c8710>重要提示：PT Nexus 仅作为转种辅助工具，无法保证 100% 准确性。转种前请务必仔细检查预览信息，确认参数正确无误。转种后请及时核实种子信息，如有错误请立即修改并反馈 bug。因使用本工具产生的种子错误问题，需由使用者自行修改，如不修改则本工具不承担任何责任。</span><span class="warning-text" data-v-594c8710>重要提示：PT Nexus 仅作为转种辅助工具，无法保证 100% 准确性。转种前请务必仔细检查预览信息，确认参数正确无误。转种后请及时核实种子信息，如有错误请立即修改并反馈 bug。因使用本工具产生的种子错误问题，需由使用者自行修改，如不修改则本工具不承担任何责任。</span></div></div></div></div></div>',1)),d(l,{class:"site-card"},{header:c(()=>[...e[0]||(e[0]=[a("div",{class:"site-card-header"},[a("span",{class:"site-card-title"},"站点支持列表"),a("div",{class:"site-legend"},[a("span",{class:"legend-item"},[a("span",{class:"legend-dot legend-dot-success"}),r(" 配置完整 ")]),a("span",{class:"legend-item"},[a("span",{class:"legend-dot legend-dot-primary"}),r(" 配置不完整 ")])])],-1)])]),default:c(()=>[e[1]||(e[1]=a("div",{class:"combined-legend"},[a("span",{class:"role-legend-item"},[a("span",{class:"role-tag role-source"},"源"),r(" 源站点 ")]),a("span",{class:"role-legend-item"},[a("span",{class:"role-tag role-target"},"目标"),r(" 目标站点 ")]),a("span",{class:"role-legend-item"},[a("span",{class:"role-tag role-both"},"源/目标"),r(" 同时支持源和目标 ")])],-1)),a("div",A,[(o(!0),n(b,null,x(v.value,t=>(o(),n("div",{key:t.name,class:S(["site-item",C(t)])},[a("div",F,[a("div",M,[a("span",j,i(t.name),1)])]),a("div",Q,[t.is_source&&t.is_target?(o(),n("span",R,"源/目标")):t.is_source?(o(),n("span",G,"源")):t.is_target?(o(),n("span",J,"目标")):g("",!0)])],2))),128)),v.value.length?g("",!0):(o(),n("div",K,"加载中..."))])]),_:1}),d(E,{gutter:24,style:{"margin-top":"24px"}},{default:c(()=>[d(D,{span:24},{default:c(()=>[a("div",O,[(o(!0),n(b,null,x(p.value,t=>(o(),I(l,{key:t.name,class:S(["downloader-card glass-card glass-rounded",{disabled:!t.enabled}])},{default:c(()=>[a("div",U,[a("div",W,[d(h,{type:t.enabled?"success":"info",effect:"dark",size:"small"},{default:c(()=>[r(i(t.type==="qbittorrent"?"QB":"TR"),1)]),_:2},1032,["type"]),r(" "+i(t.name),1)]),d(h,{type:t.status==="已连接"?"success":"danger",size:"small"},{default:c(()=>[r(i(t.status),1)]),_:2},1032,["type"])]),t.enabled?(o(),n("div",X,[a("div",Y,[e[2]||(e[2]=a("span",{class:"detail-label"},"版本:",-1)),a("span",Z,i(t.details?.版本||"N/A"),1)]),a("div",$,[e[3]||(e[3]=a("span",{class:"detail-label"},"今日上传:",-1)),a("span",ss,i(t.details?.今日上传量||"0 B"),1)]),a("div",es,[e[4]||(e[4]=a("span",{class:"detail-label"},"今日下载:",-1)),a("span",as,i(t.details?.今日下载量||"0 B"),1)]),a("div",ts,[e[5]||(e[5]=a("span",{class:"detail-label"},"累计上传:",-1)),a("span",os,i(t.details?.累计上传量||"0 B"),1)]),a("div",ns,[e[6]||(e[6]=a("span",{class:"detail-label"},"累计下载:",-1)),a("span",ls,i(t.details?.累计下载量||"0 B"),1)])])):(o(),n("div",is,"下载器已禁用"))]),_:2},1032,["class"]))),128)),p.value.length?g("",!0):(o(),n("div",rs," 暂无下载器配置 "))])]),_:1})]),_:1})])}}}),us=z(cs,[["__scopeId","data-v-594c8710"]]);export{us as default};
